<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBC | SIT Student Council Management System</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèõÔ∏è</text></svg>">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700&family=Times+New+Roman&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- FullCalendar -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.28/dist/jspdf.plugin.autotable.min.js"></script>

    <style>
        :root {
            /* SIT Brand Colors - Blue-Green Theme */
            --sit-blue: #0066CC;
            --sit-teal: #009999;
            --sit-orange: #FF6600;
            --sit-dark-blue: #003366;
            --sit-light-blue: #E6F7FF;
            
            /* Theme Variables - Light Mode */
            --primary: var(--sit-teal);
            --primary-dark: #006666;
            --primary-light: #E0F7FA;
            --secondary: #4DB6AC;
            --accent: var(--sit-orange);
            --accent-light: #FFE0B2;
            --accent-dark: #E65100;
            
            /* Background Colors */
            --bg-primary: #F0FDFF;
            --bg-secondary: #E0F7FA;
            --bg-tertiary: #B2EBF2;
            --bg-card: #FFFFFF;
            
            /* Text Colors */
            --text-primary: #01579B;
            --text-secondary: #006064;
            --text-tertiary: #00838F;
            --text-white: #FFFFFF;
            --text-dark: #00363A;
            
            /* Status Colors */
            --success: #00C853;
            --warning: #FF9800;
            --danger: #F44336;
            --info: #2196F3;
            
            /* Borders & Shadows */
            --border: #80DEEA;
            --border-light: #B2EBF2;
            --shadow-color: rgba(0, 150, 136, 0.1);
            --shadow-sm: 0 2px 4px var(--shadow-color);
            --shadow-md: 0 4px 6px -1px var(--shadow-color);
            --shadow-lg: 0 10px 15px -3px var(--shadow-color);
            --shadow-xl: 0 20px 25px -5px var(--shadow-color);
            
            /* Sizes */
            --sidebar-width: 280px;
            --header-height: 70px;
            --radius: 16px;
            --radius-sm: 8px;
            --radius-md: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Fonts */
            --font-heading: 'Poppins', sans-serif;
            --font-body: 'Inter', sans-serif;
            --font-minutes: 'Times New Roman', serif;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --primary: #26A69A;
            --primary-dark: #00796B;
            --primary-light: #004D40;
            --secondary: #80CBC4;
            --accent: #FFB74D;
            --accent-light: #5D4037;
            
            --bg-primary: #001F29;
            --bg-secondary: #00303B;
            --bg-tertiary: #004D4D;
            --bg-card: #002B36;
            
            --text-primary: #E0F2F1;
            --text-secondary: #80CBC4;
            --text-tertiary: #4DB6AC;
            --text-dark: #B2DFDB;
            
            --border: #004D40;
            --border-light: #00796B;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            transition: var(--transition);
            line-height: 1.6;
        }

        /* SIT Brand Header */
        .sit-brand-header {
            background: linear-gradient(135deg, var(--sit-blue) 0%, var(--sit-teal) 100%);
            color: var(--text-white);
            padding: 8px 0;
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
            border-bottom: 3px solid var(--sit-orange);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 2000;
            height: 38px;
        }

        .sit-brand-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .sit-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sit-logo-icon {
            width: 28px;
            height: 28px;
            background: var(--text-white);
            color: var(--sit-blue);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 14px;
            border: 2px solid var(--sit-orange);
        }

        .sit-logo-text {
            font-size: 13px;
            font-weight: 800;
            letter-spacing: 0.5px;
        }

        .sit-tagline {
            font-size: 10px;
            opacity: 0.9;
            font-weight: 400;
        }

        .sit-developer {
            font-size: 9px;
            opacity: 0.8;
            font-weight: 300;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 120px;
            right: 30px;
            z-index: 1999;
        }

        .toast {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 320px;
            max-width: 400px;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-left: 4px solid var(--accent);
            border: 1px solid var(--border);
            animation: slideIn 0.4s forwards;
        }

        @keyframes slideIn {
            to { transform: translateX(0); }
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: var(--text-white);
            flex-shrink: 0;
        }

        .toast-success .toast-icon { background: var(--success); }
        .toast-error .toast-icon { background: var(--danger); }
        .toast-warning .toast-icon { background: var(--warning); }
        .toast-info .toast-icon { background: var(--info); }

        .toast-content {
            flex: 1;
        }

        .toast-content h4 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .toast-content p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .toast-close:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* Authentication */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--sit-blue) 0%, var(--sit-teal) 100%);
            position: relative;
            overflow: hidden;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1) 2px, transparent 2px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-100px, -100px) rotate(360deg); }
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            width: 100%;
            max-width: 440px;
            box-shadow: var(--shadow-xl);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-logo-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 36px;
            border: 4px solid var(--sit-orange);
            box-shadow: var(--shadow-lg);
        }

        .auth-logo h1 {
            font-size: 26px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
            font-family: var(--font-heading);
        }

        .auth-logo p {
            color: var(--sit-teal);
            font-size: 14px;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--sit-dark-blue);
            font-size: 14px;
            font-family: var(--font-heading);
        }

        .form-label.required::after {
            content: ' *';
            color: var(--danger);
        }

        .form-control {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 15px;
            transition: var(--transition);
            background: white;
            color: var(--text-dark);
            font-family: var(--font-body);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.15);
            transform: translateY(-2px);
        }

        .form-hint {
            font-size: 12px;
            color: var(--sit-teal);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .form-hint i {
            font-size: 14px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 26px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            font-family: var(--font-heading);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--primary-light);
            border-color: var(--accent);
            transform: translateY(-3px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
        }

        .btn-outline:hover {
            background: var(--accent);
            color: white;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            padding: 0;
        }

        .btn-icon:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: translateY(-2px);
        }

        .btn-icon.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .btn-block {
            width: 100%;
        }

        /* Main App */
        .app-container {
            display: none;
            min-height: calc(100vh - 38px);
            margin-top: 38px;
        }

        /* Header */
        .header {
            height: var(--header-height);
            background: var(--bg-card);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 38px;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 30px;
            border-bottom: 3px solid var(--accent);
            transition: var(--transition);
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 22px;
            color: var(--text-primary);
            cursor: pointer;
            display: none;
            padding: 10px;
            border-radius: 10px;
            transition: var(--transition);
            margin-right: 15px;
        }

        .menu-toggle:hover {
            background: var(--bg-tertiary);
            color: var(--accent);
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .logo-icon {
            width: 46px;
            height: 46px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 20px;
            border: 3px solid var(--sit-orange);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: 'SBC';
            position: absolute;
            bottom: 3px;
            right: 3px;
            font-size: 6px;
            color: rgba(255,255,255,0.7);
        }

        .header-title h1 {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            font-family: var(--font-heading);
            letter-spacing: -0.3px;
        }

        .header-title p {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 500;
        }

        .header-actions {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theme-toggle {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 10px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 20px;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: rotate(30deg);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            padding: 10px 16px;
            border-radius: 12px;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .user-profile:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent);
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            border: 2px solid var(--sit-orange);
            overflow: hidden;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-info h4 {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 3px;
        }

        .user-info p {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 500;
        }

        /* Auto-save Indicator */
        .auto-save-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            transition: var(--transition);
        }

        .auto-save-indicator.saving {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
        }

        .auto-save-indicator.saved {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .auto-save-indicator i {
            font-size: 14px;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-card);
            position: fixed;
            top: calc(38px + var(--header-height));
            left: 0;
            bottom: 0;
            box-shadow: var(--shadow-md);
            padding: 30px 0;
            overflow-y: auto;
            transition: var(--transition);
            z-index: 999;
            border-right: 3px solid var(--accent);
        }

        .nav-group {
            margin-bottom: 30px;
            padding: 0 25px;
        }

        .nav-label {
            font-size: 11px;
            text-transform: uppercase;
            color: var(--text-tertiary);
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 15px;
            padding-left: 15px;
            opacity: 0.7;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 14px 18px;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--accent);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--accent);
            transform: translateX(5px);
        }

        .nav-item:hover::before {
            transform: scaleY(1);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary-light), rgba(255, 102, 0, 0.1));
            color: var(--accent);
            font-weight: 700;
            border-color: var(--accent);
            box-shadow: var(--shadow-sm);
        }

        .nav-item.active::before {
            transform: scaleY(1);
        }

        .nav-item i {
            width: 22px;
            text-align: center;
            font-size: 18px;
            color: inherit;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--accent);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 30px;
            min-height: calc(100vh - 38px - var(--header-height));
            transition: var(--transition);
        }

        .page-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-header {
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            padding: 25px 30px;
            background: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            border-left: 5px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, rgba(0, 150, 136, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(100px, -100px);
        }

        .page-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: var(--font-heading);
        }

        .page-title i {
            color: var(--accent);
            font-size: 32px;
        }

        .page-subtitle {
            font-size: 15px;
            color: var(--text-tertiary);
            margin-top: 8px;
            font-weight: 500;
            max-width: 600px;
            line-height: 1.5;
        }

        .page-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: 2px solid var(--border);
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--sit-blue), var(--sit-teal), var(--sit-orange));
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            font-family: var(--font-heading);
        }

        .card-title i {
            color: var(--accent);
            margin-right: 10px;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            box-shadow: var(--shadow-md);
        }

        .card-value {
            font-size: 36px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 10px;
            font-family: var(--font-heading);
        }

        .card-label {
            font-size: 14px;
            color: var(--text-tertiary);
            font-weight: 500;
            margin-bottom: 15px;
        }

        /* Top Performer */
        .top-performer {
            background: linear-gradient(135deg, rgba(255, 102, 0, 0.1), rgba(0, 150, 136, 0.1));
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            border: 3px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .top-performer::before {
            content: 'üèÜ';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 60px;
            opacity: 0.2;
            transform: rotate(15deg);
        }

        .performer-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--accent);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .performer-content {
            display: flex;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .performer-avatar {
            width: 100px;
            height: 100px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 36px;
            font-weight: 700;
            border: 4px solid var(--sit-orange);
            overflow: hidden;
            flex-shrink: 0;
        }

        .performer-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .performer-info {
            flex: 1;
            min-width: 300px;
        }

        .performer-name {
            font-size: 24px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-family: var(--font-heading);
        }

        .performer-role {
            font-size: 16px;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 15px;
            background: rgba(255, 102, 0, 0.1);
            padding: 6px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        .performer-reason {
            color: var(--text-secondary);
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .performer-stats {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }

        .performer-stat {
            text-align: center;
        }

        .performer-stat-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--accent);
            font-family: var(--font-heading);
        }

        .performer-stat-label {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Meeting Types */
        .meeting-type-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .meeting-type-regular {
            background: rgba(33, 150, 243, 0.1);
            color: var(--info);
            border: 2px solid var(--info);
        }

        .meeting-type-random {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning);
            border: 2px solid var(--warning);
        }

        /* Form Sections */
        .form-section {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--border);
            transition: var(--transition);
        }

        .form-section:hover {
            border-color: var(--accent);
        }

        .section-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: var(--font-heading);
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent);
        }

        .section-title i {
            color: var(--accent);
            font-size: 24px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        /* Save Button Group */
        .save-btn-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        /* Chat Dashboard */
        .chat-dashboard {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            border: 3px solid var(--accent);
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .chat-container {
            display: flex;
            flex: 1;
            gap: 25px;
            min-height: 0;
        }

        .chat-sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 20px;
            overflow-y: auto;
            border: 2px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: var(--radius);
            border: 2px solid var(--border);
        }

        .message {
            background: var(--bg-card);
            padding: 15px 20px;
            border-radius: 18px;
            margin-bottom: 15px;
            max-width: 75%;
            box-shadow: var(--shadow-sm);
            border: 2px solid var(--border);
            animation: slideInMessage 0.3s ease;
        }

        @keyframes slideInMessage {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.sent {
            margin-left: auto;
            background: linear-gradient(135deg, var(--primary-light), rgba(0, 150, 136, 0.1));
            border-color: var(--accent);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .message-sender {
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sender-avatar {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 11px;
            font-weight: 700;
        }

        .message-time {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .message-content {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .message-reactions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .reaction-btn {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 4px 12px;
            font-size: 13px;
            color: var(--text-tertiary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .reaction-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: scale(1.05);
        }

        .chat-input-area {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-input textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--border);
            border-radius: 20px;
            resize: none;
            font-family: var(--font-body);
            font-size: 15px;
            background: var(--bg-card);
            color: var(--text-primary);
            transition: var(--transition);
            min-height: 80px;
            max-height: 150px;
        }

        .chat-input textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.15);
        }

        .chat-input-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Archive Section */
        .archive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .archive-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .archive-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .archive-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--sit-blue), var(--sit-teal));
        }

        .archive-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-light);
        }

        .archive-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            font-family: var(--font-heading);
        }

        .archive-date {
            font-size: 13px;
            color: var(--text-tertiary);
            font-weight: 500;
            background: var(--bg-tertiary);
            padding: 4px 12px;
            border-radius: 20px;
        }

        .archive-content {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .archive-actions {
            display: flex;
            gap: 10px;
        }

        /* Council Members */
        .members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .member-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .member-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .member-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--sit-blue), var(--sit-teal));
        }

        .member-avatar {
            width: 90px;
            height: 90px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: 700;
            margin: 0 auto 20px;
            border: 4px solid var(--sit-orange);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .member-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .member-name {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-family: var(--font-heading);
        }

        .member-role {
            font-size: 15px;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 15px;
            background: rgba(255, 102, 0, 0.1);
            padding: 6px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        .member-id {
            font-size: 13px;
            color: var(--text-tertiary);
            margin-bottom: 15px;
            font-family: monospace;
            background: var(--bg-tertiary);
            padding: 6px 12px;
            border-radius: 10px;
            display: inline-block;
        }

        .member-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border-light);
        }

        .member-stat {
            text-align: center;
        }

        .member-stat-value {
            font-size: 20px;
            font-weight: 800;
            color: var(--accent);
            font-family: var(--font-heading);
        }

        .member-stat-label {
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* PDF Preview */
        .pdf-preview {
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: var(--shadow-xl);
            font-family: var(--font-minutes);
            border: 3px solid var(--accent);
            max-width: 100%;
            overflow-x: auto;
        }

        .pdf-header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px double var(--sit-blue);
            padding-bottom: 30px;
        }

        .pdf-header h2 {
            font-size: 32px;
            color: var(--sit-blue);
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .pdf-header p {
            color: var(--sit-teal);
            font-size: 18px;
            margin-bottom: 5px;
        }

        .pdf-metadata {
            font-size: 12px;
            color: #666;
            margin-top: 15px;
        }

        .pdf-section {
            margin-bottom: 30px;
            page-break-inside: avoid;
        }

        .pdf-section h3 {
            font-size: 18px;
            color: var(--sit-blue);
            border-bottom: 2px solid var(--sit-orange);
            padding-bottom: 8px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .pdf-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        .pdf-table th,
        .pdf-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
            vertical-align: top;
        }

        .pdf-table th {
            background: #f5f5f5;
            font-weight: bold;
            color: var(--sit-blue);
        }

        .pdf-signature {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 2px solid #000;
            display: flex;
            justify-content: space-between;
        }

        .signature-block {
            width: 45%;
            text-align: center;
        }

        .signature-line {
            margin-top: 60px;
            border-top: 1px solid #000;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                padding: 25px;
            }
            
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                width: 300px;
                box-shadow: var(--shadow-xl);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .menu-toggle {
                display: flex;
            }

            .header {
                padding: 0 20px;
            }

            .page-header {
                padding: 20px;
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-actions {
                width: 100%;
                justify-content: flex-start;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .chat-container {
                flex-direction: column;
            }

            .chat-sidebar {
                width: 100%;
                height: 200px;
            }

            .performer-content {
                flex-direction: column;
                text-align: center;
            }

            .performer-info {
                min-width: auto;
            }

            .members-grid {
                grid-template-columns: 1fr;
            }

            .archive-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .auth-card {
                padding: 30px 20px;
                margin: 10px;
            }

            .main-content {
                padding: 15px;
            }

            .page-header {
                padding: 20px 15px;
            }

            .page-title {
                font-size: 24px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 14px;
            }

            .save-btn-group {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* Print Styles for PDF */
        @media print {
            .sit-brand-header,
            .header,
            .sidebar,
            .menu-toggle,
            .theme-toggle,
            .user-profile,
            .page-actions,
            .btn,
            .nav-badge,
            .chat-dashboard,
            .toast-container {
                display: none !important;
            }

            .main-content {
                margin: 0 !important;
                padding: 0 !important;
            }

            .pdf-preview {
                box-shadow: none;
                border: none;
                padding: 0;
                margin: 0;
            }

            body {
                background: white !important;
                color: black !important;
                font-size: 12pt !important;
            }

            .page-content {
                display: block !important;
            }

            .page-header {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- SIT Brand Header -->
    <div class="sit-brand-header">
        <div class="container">
            <div class="sit-logo">
                <div class="sit-logo-icon">SBC</div>
                <div>
                    <div class="sit-logo-text">SIT STUDENT COUNCIL</div>
                    <div class="sit-tagline">Professional Meeting Management System</div>
                </div>
            </div>
            <div class="sit-developer">Developed by SBC 2026 | Portal v2.0</div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p style="margin-top: 20px; color: var(--text-tertiary); font-weight: 500;">Loading SBC Portal...</p>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Authentication Section -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <div class="auth-logo">
                <div class="auth-logo-icon">üèõÔ∏è</div>
                <h1>SBC Portal</h1>
                <p>SIT Student Council Management System</p>
            </div>

            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label class="form-label required">SIT Email Address</label>
                    <input type="email" class="form-control" id="loginEmail" placeholder="name@sit.edu" required>
                    <div class="form-hint">
                        <i class="fas fa-info-circle"></i> Use your official SIT email
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Password</label>
                    <input type="password" class="form-control" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    <div class="form-hint">
                        <i class="fas fa-lock"></i> Contact controller if you forgot password
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label required">Student ID</label>
                    <input type="text" class="form-control" id="studentId" placeholder="SIT-ST-2029-00XXX" required>
                    <div class="form-hint">
                        <i class="fas fa-id-card"></i> Format: SIT-ST-2029-00XXX
                    </div>
                </div>

                <div style="margin: 25px 0; text-align: center;">
                    <p style="font-size: 13px; color: var(--sit-teal); line-height: 1.5;">
                        <i class="fas fa-shield-alt"></i> Restricted Access<br>
                        Only approved SIT Council members can login
                    </p>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Login to Council Portal
                </button>

                <div style="margin-top: 30px; padding-top: 25px; border-top: 2px solid var(--border);">
                    <p style="font-size: 12px; color: var(--sit-teal); text-align: center; line-height: 1.6;">
                        <strong>Controller Contacts:</strong><br>
                        <i class="fas fa-envelope"></i> xaahaa12@gmail.com<br>
                        <i class="fas fa-envelope"></i> tahir.h.bedane@gmail.com<br>
                        <i class="fas fa-envelope"></i> tahirhasan432@gmail.com
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="header">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>

            <div class="header-logo">
                <div class="logo-icon">SBC</div>
                <div class="header-title">
                    <h1>SIT Student Council</h1>
                    <p>Meeting Minutes & Management System</p>
                </div>
            </div>

            <div class="header-actions">
                <div class="auto-save-indicator" id="globalAutoSaveIndicator">
                    <i class="fas fa-save"></i>
                    <span>Auto-save: On</span>
                </div>

                <button class="theme-toggle" id="themeToggle" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>

                <div class="user-profile" id="userProfile">
                    <div class="user-avatar" id="userAvatar">TH</div>
                    <div class="user-info">
                        <h4 id="userName">Tahir Hasan</h4>
                        <p id="userRole">Secretary</p>
                    </div>
                    <i class="fas fa-chevron-down" style="font-size: 14px;"></i>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="nav-group">
                <div class="nav-label">Dashboard</div>
                <a href="#" class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    Overview
                    <span class="nav-badge" id="dashboardBadge">3</span>
                </a>
                <a href="#" class="nav-item" data-page="performance">
                    <i class="fas fa-chart-line"></i>
                    Performance
                </a>
                <a href="#" class="nav-item" data-page="chat">
                    <i class="fas fa-comments"></i>
                    Council Chat
                    <span class="nav-badge" id="chatBadge">12</span>
                </a>
            </div>

            <div class="nav-group">
                <div class="nav-label">Meetings</div>
                <a href="#" class="nav-item" data-page="new-meeting">
                    <i class="fas fa-plus-circle"></i>
                    New Meeting
                </a>
                <a href="#" class="nav-item" data-page="meeting-info">
                    <i class="fas fa-info-circle"></i>
                    Meeting Info
                </a>
                <a href="#" class="nav-item" data-page="agenda">
                    <i class="fas fa-list-ol"></i>
                    Agenda Builder
                </a>
                <a href="#" class="nav-item" data-page="questions">
                    <i class="fas fa-question-circle"></i>
                    Student Questions
                </a>
                <a href="#" class="nav-item" data-page="attendance">
                    <i class="fas fa-user-check"></i>
                    Attendance
                </a>
                <a href="#" class="nav-item" data-page="minutes-actions">
                    <i class="fas fa-clipboard-list"></i>
                    Minutes & Actions
                </a>
            </div>

            <div class="nav-group">
                <div class="nav-label">Management</div>
                <a href="#" class="nav-item" data-page="publish">
                    <i class="fas fa-share-alt"></i>
                    Publish & Share
                </a>
                <a href="#" class="nav-item" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    Calendar
                    <span class="nav-badge" id="calendarBadge">5</span>
                </a>
                <a href="#" class="nav-item" data-page="archive">
                    <i class="fas fa-archive"></i>
                    Archive
                    <span class="nav-badge" id="archiveBadge">24</span>
                </a>
                <a href="#" class="nav-item" data-page="members">
                    <i class="fas fa-users"></i>
                    Council Members
                </a>
            </div>

            <div class="nav-group">
                <div class="nav-label">Settings</div>
                <a href="#" class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    Settings
                </a>
                <a href="#" class="nav-item" data-page="pdf-export">
                    <i class="fas fa-file-pdf"></i>
                    PDF Export
                </a>
                <a href="#" class="nav-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </a>
            </div>

            <div class="nav-group" style="margin-top: 40px;">
                <div class="nav-label">System Info</div>
                <div style="padding: 15px; background: var(--bg-tertiary); border-radius: 10px; font-size: 12px; color: var(--text-tertiary);">
                    <div><strong>Last Backup:</strong> Today, 02:30 AM</div>
                    <div><strong>Active Users:</strong> <span id="activeUsersCount">8</span></div>
                    <div><strong>Storage:</strong> 1.2 GB / 10 GB</div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard Content -->
            <div class="page-content active" id="dashboardContent">
                <div class="page-header">
                    <div>
                        <h1 class="page-title"><i class="fas fa-tachometer-alt"></i> Council Dashboard</h1>
                        <p class="page-subtitle">
                            Welcome back, <span id="greetingName" style="color: var(--accent); font-weight: 600;">Tahir</span>! 
                            Here's your council overview and recent activities.
                        </p>
                    </div>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="refreshDashboardBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn btn-primary" id="quickMeetingBtn">
                                <i class="fas fa-plus"></i> Quick Meeting
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Top Performer of the Week -->
                <div class="top-performer">
                    <div class="performer-badge">Man of the Week</div>
                    <div class="performer-content">
                        <div class="performer-avatar">TH</div>
                        <div class="performer-info">
                            <h2 class="performer-name">Tahir Hasan</h2>
                            <div class="performer-role">Secretary</div>
                            <p class="performer-reason">
                                For outstanding leadership in organizing the cultural fest, completing 15 action items, 
                                and maintaining perfect meeting attendance for 3 consecutive weeks.
                            </p>
                            <div class="performer-stats">
                                <div class="performer-stat">
                                    <div class="performer-stat-value">15</div>
                                    <div class="performer-stat-label">Tasks Done</div>
                                </div>
                                <div class="performer-stat">
                                    <div class="performer-stat-value">100%</div>
                                    <div class="performer-stat-label">Attendance</div>
                                </div>
                                <div class="performer-stat">
                                    <div class="performer-stat-value">8</div>
                                    <div class="performer-stat-label">Meetings</div>
                                </div>
                                <div class="performer-stat">
                                    <div class="performer-stat-value">98%</div>
                                    <div class="performer-stat-label">Performance</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div>
                                <div class="card-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="card-value" id="meetingsCount">8</div>
                                <div class="card-label">Meetings This Month</div>
                            </div>
                            <div class="card-actions">
                                <button class="btn-icon" title="View All">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline" onclick="navigateTo('calendar')">
                                <i class="fas fa-eye"></i> View Calendar
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div>
                                <div class="card-icon" style="background: linear-gradient(135deg, var(--success), #00E676);">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="card-value" id="tasksCount">24</div>
                                <div class="card-label">Completed Actions</div>
                            </div>
                            <div class="card-actions">
                                <button class="btn-icon" title="Refresh">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline" onclick="navigateTo('minutes-actions')">
                                <i class="fas fa-tasks"></i> View Actions
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div>
                                <div class="card-icon" style="background: linear-gradient(135deg, var(--accent), #FF9800);">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="card-value" id="membersCount">12</div>
                                <div class="card-label">Council Members</div>
                            </div>
                            <div class="card-actions">
                                <button class="btn-icon" title="Add Member">
                                    <i class="fas fa-user-plus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline" onclick="navigateTo('members')">
                                <i class="fas fa-address-book"></i> View Members
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div>
                                <div class="card-icon" style="background: linear-gradient(135deg, var(--info), #42A5F5);">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div class="card-value" id="messagesCount">156</div>
                                <div class="card-label">Chat Messages</div>
                            </div>
                            <div class="card-actions">
                                <button class="btn-icon" title="New Message">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline" onclick="navigateTo('chat')">
                                <i class="fas fa-comment"></i> Open Chat
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="page-header">
                    <h2 class="page-title"><i class="fas fa-bolt"></i> Quick Actions</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="generateReportBtn">
                            <i class="fas fa-file-pdf"></i> Generate Report
                        </button>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 40px;">
                    <button class="btn btn-secondary" onclick="navigateTo('new-meeting')" style="height: 100px; flex-direction: column; padding: 20px;">
                        <i class="fas fa-video fa-2x" style="margin-bottom: 10px;"></i>
                        <span>Schedule Meeting</span>
                    </button>
                    <button class="btn btn-secondary" onclick="navigateTo('chat')" style="height: 100px; flex-direction: column; padding: 20px;">
                        <i class="fas fa-comment-dots fa-2x" style="margin-bottom: 10px;"></i>
                        <span>Council Chat</span>
                    </button>
                    <button class="btn btn-secondary" onclick="navigateTo('minutes-actions')" style="height: 100px; flex-direction: column; padding: 20px;">
                        <i class="fas fa-clipboard-list fa-2x" style="margin-bottom: 10px;"></i>
                        <span>Meeting Minutes</span>
                    </button>
                    <button class="btn btn-secondary" onclick="navigateTo('members')" style="height: 100px; flex-direction: column; padding: 20px;">
                        <i class="fas fa-user-plus fa-2x" style="margin-bottom: 10px;"></i>
                        <span>Add Member</span>
                    </button>
                </div>
            </div>

            <!-- Performance Dashboard -->
            <div class="page-content" id="performanceContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-chart-line"></i> Performance Dashboard</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="refreshPerformanceBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn btn-primary" id="exportPerformanceBtn">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Top Performers -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div>
                                <h3 class="card-title"><i class="fas fa-trophy"></i> Man of the Month</h3>
                            </div>
                            <span class="meeting-type-badge meeting-type-regular">Top Performer</span>
                        </div>
                        <div style="text-align: center; padding: 20px;">
                            <div class="member-avatar" style="width: 100px; height: 100px; margin: 0 auto 15px;">IM</div>
                            <h3 style="color: var(--text-primary); margin-bottom: 5px;">Ibrahim Mohammed</h3>
                            <div class="member-role" style="display: inline-block;">President</div>
                            <p style="color: var(--text-secondary); margin: 15px 0; font-size: 14px;">
                                Exceptional leadership and strategic planning throughout November
                            </p>
                            <div class="member-stats">
                                <div class="member-stat">
                                    <div class="member-stat-value">28</div>
                                    <div class="member-stat-label">Tasks</div>
                                </div>
                                <div class="member-stat">
                                    <div class="member-stat-value">8</div>
                                    <div class="member-stat-label">Meetings</div>
                                </div>
                                <div class="member-stat">
                                    <div class="member-stat-value">92%</div>
                                    <div class="member-stat-label">Score</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-bar"></i> Performance Metrics</h3>
                        </div>
                        <div style="padding: 20px;">
                            <canvas id="performanceChart" height="250"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="dashboard-card" style="margin-top: 30px;">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-ranking-star"></i> Council Leaderboard</h3>
                        <div class="card-actions">
                            <button class="btn-icon" id="refreshLeaderboard">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: var(--bg-tertiary);">
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Rank</th>
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Member</th>
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Role</th>
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Tasks Completed</th>
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Meetings Attended</th>
                                    <th style="padding: 15px; text-align: left; color: var(--text-primary);">Performance Score</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardTable">
                                <!-- Leaderboard will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Chat Dashboard -->
            <div class="page-content" id="chatContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-comments"></i> Council Communication Hub</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="clearChatBtn">
                                <i class="fas fa-trash"></i> Clear Chat
                            </button>
                            <button class="btn btn-primary" id="newDiscussionBtn">
                                <i class="fas fa-plus"></i> New Discussion
                            </button>
                        </div>
                    </div>
                </div>

                <div class="chat-dashboard">
                    <div class="chat-container">
                        <!-- Sidebar with Discussions -->
                        <div class="chat-sidebar">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px; font-size: 18px;">
                                <i class="fas fa-hashtag"></i> Active Discussions
                            </h3>
                            <div class="discussion-list" id="discussionList">
                                <!-- Discussions will be loaded here -->
                            </div>
                            <div style="margin-top: auto; padding-top: 20px; border-top: 2px solid var(--border);">
                                <button class="btn btn-outline" id="startNewDiscussionBtn" style="width: 100%;">
                                    <i class="fas fa-plus-circle"></i> Start New
                                </button>
                            </div>
                        </div>

                        <!-- Main Chat Area -->
                        <div class="chat-main">
                            <div class="chat-messages" id="chatMessages">
                                <!-- Messages will be loaded here -->
                            </div>
                            
                            <div class="chat-input-area">
                                <div class="chat-input">
                                    <textarea id="messageInput" placeholder="Type your message here... (Press Ctrl+Enter to send)"></textarea>
                                    <div class="chat-input-actions">
                                        <div style="display: flex; gap: 10px;">
                                            <button class="btn-icon" id="emojiBtn" title="Add Emoji">
                                                <i class="fas fa-smile"></i>
                                            </button>
                                            <button class="btn-icon" id="attachmentBtn" title="Add Attachment">
                                                <i class="fas fa-paperclip"></i>
                                            </button>
                                        </div>
                                        <div class="save-btn-group">
                                            <span class="auto-save-indicator" id="chatAutoSave">
                                                <i class="fas fa-save"></i>
                                                <span>Auto-saved</span>
                                            </span>
                                            <button class="btn btn-primary" id="sendMessageBtn">
                                                <i class="fas fa-paper-plane"></i> Send
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Council Updates Section -->
                <div class="page-header" style="margin-top: 30px;">
                    <h2 class="page-title"><i class="fas fa-bullhorn"></i> Council Updates & Announcements</h2>
                    <button class="btn btn-primary" id="postUpdateBtn">
                        <i class="fas fa-plus"></i> Post Update
                    </button>
                </div>

                <div id="councilUpdates" style="background: var(--bg-card); padding: 25px; border-radius: var(--radius); margin-top: 20px; border: 2px solid var(--border);">
                    <!-- Updates will be loaded here -->
                </div>
            </div>

            <!-- New Meeting Content -->
            <div class="page-content" id="newMeetingContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-plus-circle"></i> Schedule New Meeting</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <span class="auto-save-indicator" id="meetingAutoSave">
                                <i class="fas fa-save"></i>
                                <span>Auto-saved</span>
                            </span>
                            <button class="btn btn-secondary" id="saveMeetingDraftBtn">
                                <i class="fas fa-save"></i> Save Draft
                            </button>
                            <button class="btn btn-primary" id="scheduleMeetingBtn">
                                <i class="fas fa-calendar-plus"></i> Schedule Meeting
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Meeting Type Selection -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Meeting Type</h2>
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <input type="radio" name="meetingType" id="regularMeeting" value="regular" checked style="display: none;">
                            <label for="regularMeeting" class="meeting-type-selector">
                                <div style="text-align: center; padding: 30px; background: var(--bg-tertiary); border-radius: var(--radius); border: 3px solid var(--info); cursor: pointer; transition: var(--transition);">
                                    <i class="fas fa-calendar-check fa-3x" style="color: var(--info); margin-bottom: 15px;"></i>
                                    <h3 style="color: var(--text-primary); margin-bottom: 10px;">Regular Meeting</h3>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Scheduled bi-weekly/monthly meetings</p>
                                </div>
                            </label>
                        </div>
                        <div style="flex: 1;">
                            <input type="radio" name="meetingType" id="randomMeeting" value="random" style="display: none;">
                            <label for="randomMeeting" class="meeting-type-selector">
                                <div style="text-align: center; padding: 30px; background: var(--bg-tertiary); border-radius: var(--radius); border: 3px solid var(--warning); cursor: pointer; transition: var(--transition);">
                                    <i class="fas fa-bolt fa-3x" style="color: var(--warning); margin-bottom: 15px;"></i>
                                    <h3 style="color: var(--text-primary); margin-bottom: 10px;">Random/Urgent Meeting</h3>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Emergency or unscheduled meetings</p>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Meeting Information -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-info-circle"></i> Meeting Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Meeting Title</label>
                            <input type="text" class="form-control" id="meetingTitle" placeholder="e.g., Monthly Council Meeting">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Meeting Code</label>
                            <input type="text" class="form-control" id="meetingCode" placeholder="SC-2023-11-001" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Date</label>
                            <input type="date" class="form-control" id="meetingDate">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Start Time</label>
                            <input type="time" class="form-control" id="meetingStartTime">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">End Time</label>
                            <input type="time" class="form-control" id="meetingEndTime">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Location/Venue</label>
                            <input type="text" class="form-control" id="meetingLocation" placeholder="e.g., SIT Admin Meeting Room">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Chairperson</label>
                            <select class="form-control" id="meetingChair">
                                <option value="">Select Chairperson</option>
                                <!-- Options will be populated -->
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Meeting Objective/Purpose</label>
                        <textarea class="form-control" id="meetingObjective" rows="3" placeholder="Brief description of meeting purpose and objectives..."></textarea>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="form-section" style="text-align: center; padding: 30px;">
                    <div class="save-btn-group" style="justify-content: center;">
                        <button class="btn btn-secondary" style="padding: 15px 40px;" id="clearMeetingFormBtn">
                            <i class="fas fa-times"></i> Clear Form
                        </button>
                        <button class="btn btn-primary" style="padding: 15px 40px;" id="proceedToAgendaBtn">
                            <i class="fas fa-arrow-right"></i> Proceed to Agenda
                        </button>
                    </div>
                </div>
            </div>

            <!-- Meeting Info Dashboard -->
            <div class="page-content" id="meetingInfoContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-info-circle"></i> Meeting Information</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="editMeetingInfoBtn">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-primary" id="saveMeetingInfoBtn">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Meeting info content will be loaded here -->
            </div>

            <!-- Agenda Builder -->
            <div class="page-content" id="agendaContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-list-ol"></i> Agenda Builder</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <span class="auto-save-indicator" id="agendaAutoSave">
                                <i class="fas fa-save"></i>
                                <span>Auto-saved</span>
                            </span>
                            <button class="btn btn-primary" id="saveAgendaBtn">
                                <i class="fas fa-save"></i> Save Agenda
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Agenda builder content will be here -->
            </div>

            <!-- Student Questions -->
            <div class="page-content" id="questionsContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-question-circle"></i> Student Questions</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <span class="auto-save-indicator" id="questionsAutoSave">
                                <i class="fas fa-save"></i>
                                <span>Auto-saved</span>
                            </span>
                            <button class="btn btn-primary" id="saveQuestionsBtn">
                                <i class="fas fa-save"></i> Save Questions
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Questions content will be here -->
            </div>

            <!-- Attendance -->
            <div class="page-content" id="attendanceContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-user-check"></i> Attendance Tracking</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <span class="auto-save-indicator" id="attendanceAutoSave">
                                <i class="fas fa-save"></i>
                                <span>Auto-saved</span>
                            </span>
                            <button class="btn btn-primary" id="saveAttendanceBtn">
                                <i class="fas fa-save"></i> Save Attendance
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Attendance content will be here -->
            </div>

            <!-- Minutes & Actions -->
            <div class="page-content" id="minutesActionsContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-clipboard-list"></i> Minutes & Action Items</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <span class="auto-save-indicator" id="minutesAutoSave">
                                <i class="fas fa-save"></i>
                                <span>Auto-saved</span>
                            </span>
                            <button class="btn btn-primary" id="saveMinutesBtn">
                                <i class="fas fa-save"></i> Save Minutes
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Minutes content will be here -->
            </div>

            <!-- Publish & Share -->
            <div class="page-content" id="publishContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-share-alt"></i> Publish & Share</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="previewPublishBtn">
                                <i class="fas fa-eye"></i> Preview
                            </button>
                            <button class="btn btn-primary" id="publishNowBtn">
                                <i class="fas fa-paper-plane"></i> Publish Now
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Publish content will be here -->
            </div>

            <!-- Calendar -->
            <div class="page-content" id="calendarContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-calendar-alt"></i> Meeting Calendar</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="prevMonthBtn">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" id="todayBtn">
                                <i class="fas fa-calendar-day"></i> Today
                            </button>
                            <button class="btn btn-secondary" id="nextMonthBtn">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="calendar" style="background: var(--bg-card); padding: 25px; border-radius: var(--radius); border: 2px solid var(--border);"></div>
            </div>

            <!-- Archive -->
            <div class="page-content" id="archiveContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-archive"></i> Meeting Archive</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="filterArchiveBtn">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                            <button class="btn btn-primary" id="exportArchiveBtn">
                                <i class="fas fa-download"></i> Export Archive
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Archive Stats -->
                <div class="dashboard-grid" style="margin-bottom: 30px;">
                    <div class="dashboard-card">
                        <div class="card-value" id="totalMeetingsArchived">24</div>
                        <div class="card-label">Total Meetings Archived</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-value" id="thisYearArchived">8</div>
                        <div class="card-label">This Year</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-value" id="thisMonthArchived">3</div>
                        <div class="card-label">This Month</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-value" id="storageUsed">1.2 GB</div>
                        <div class="card-label">Storage Used</div>
                    </div>
                </div>

                <!-- Archive Grid -->
                <div class="archive-grid" id="archiveGrid">
                    <!-- Archived meetings will be loaded here -->
                </div>
            </div>

            <!-- Council Members -->
            <div class="page-content" id="membersContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-users"></i> Council Members</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="refreshMembersBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn btn-primary" id="addMemberBtn">
                                <i class="fas fa-user-plus"></i> Add Member
                            </button>
                        </div>
                    </div>
                </div>

                <div class="members-grid" id="councilMembersGrid">
                    <!-- Members will be loaded here -->
                </div>
            </div>

            <!-- Settings -->
            <div class="page-content" id="settingsContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-cog"></i> Settings & Preferences</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="resetSettingsBtn">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                            <button class="btn btn-primary" id="saveSettingsBtn">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Profile Settings -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-user-cog"></i> Profile Settings</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Full Name</label>
                            <input type="text" class="form-control" id="profileName" value="Tahir Hasan">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">SIT Email</label>
                            <input type="email" class="form-control" id="profileEmail" value="tahir.h.bedane@sit.edu" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Student ID</label>
                            <input type="text" class="form-control" id="profileStudentId" value="SIT-ST-2029-00123" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Council Role</label>
                            <input type="text" class="form-control" id="profileRole" value="Secretary" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Profile Picture</label>
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <div class="user-avatar" id="profileAvatar" style="width: 80px; height: 80px;">TH</div>
                            <div>
                                <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-outline" onclick="document.getElementById('avatarUpload').click()">
                                    <i class="fas fa-upload"></i> Upload Photo
                                </button>
                                <div class="form-hint" style="margin-top: 10px;">
                                    <i class="fas fa-info-circle"></i> Recommended size: 400x400 pixels
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-shield-alt"></i> Security</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Change Password</label>
                        <div class="form-row">
                            <div class="form-group">
                                <input type="password" class="form-control" id="currentPassword" placeholder="Current Password">
                            </div>
                            <div class="form-group">
                                <input type="password" class="form-control" id="newPassword" placeholder="New Password">
                            </div>
                            <div class="form-group">
                                <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm New Password">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="changePasswordBtn">
                            <i class="fas fa-key"></i> Change Password
                        </button>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Two-Factor Authentication</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Add an extra layer of security to your account</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="twoFactorAuth">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Notification Settings -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-bell"></i> Notifications</h2>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Email Notifications</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Receive meeting notifications via email</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="emailNotifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Chat Notifications</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Notify about new chat messages</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="chatNotifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Meeting Reminders</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Remind before meetings</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="meetingReminders" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Display Settings -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-palette"></i> Display & Theme</h2>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Dark Mode</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Switch between light and dark themes</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Auto-save</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Automatically save your work</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoSaveToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Animations</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Enable interface animations</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-database"></i> Data Management</h2>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Export All Data</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Download all your data in JSON format</p>
                        </div>
                        <button class="btn btn-outline" onclick="exportAllData()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Clear Cache</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Remove temporary files and data</p>
                        </div>
                        <button class="btn btn-outline" onclick="clearCache()">
                            <i class="fas fa-broom"></i> Clear
                        </button>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 style="color: var(--text-primary); font-size: 15px; margin-bottom: 5px;">Backup Data</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">Create a backup of all data</p>
                        </div>
                        <button class="btn btn-outline" onclick="createBackup()">
                            <i class="fas fa-save"></i> Backup Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- PDF Export -->
            <div class="page-content" id="pdfExportContent">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-file-pdf"></i> PDF Export & Printing</h1>
                    <div class="page-actions">
                        <div class="save-btn-group">
                            <button class="btn btn-secondary" id="printPdfBtn">
                                <i class="fas fa-print"></i> Print
                            </button>
                            <button class="btn btn-primary" id="generatePdfBtn">
                                <i class="fas fa-file-download"></i> Generate PDF
                            </button>
                        </div>
                    </div>
                </div>

                <div class="pdf-preview" id="pdfPreview">
                    <div class="pdf-header">
                        <h2>SIT STUDENT COUNCIL MEETING MINUTES</h2>
                        <p>Official Record of Proceedings</p>
                        <div class="pdf-metadata">
                            Document ID: <span id="pdfDocId">SBC-2023-11-001</span> | 
                            Generated: <span id="pdfGeneratedDate">November 29, 2023</span> | 
                            Page 1 of 1
                        </div>
                    </div>

                    <div class="pdf-section">
                        <h3>MEETING DETAILS</h3>
                        <table class="pdf-table">
                            <tr>
                                <td width="30%"><strong>Meeting Title:</strong></td>
                                <td width="70%" id="pdfMeetingTitle">Monthly Council Meeting</td>
                            </tr>
                            <tr>
                                <td><strong>Date:</strong></td>
                                <td id="pdfMeetingDate">Tuesday, November 4, 2025</td>
                            </tr>
                            <tr>
                                <td><strong>Time:</strong></td>
                                <td id="pdfMeetingTime">11:40 AM - 12:40 PM</td>
                            </tr>
                            <tr>
                                <td><strong>Venue:</strong></td>
                                <td id="pdfMeetingVenue">SIT Administration Meeting Room</td>
                            </tr>
                            <tr>
                                <td><strong>Meeting Type:</strong></td>
                                <td id="pdfMeetingType">Regular Council Meeting</td>
                            </tr>
                            <tr>
                                <td><strong>Chairperson:</strong></td>
                                <td id="pdfChairperson">Ibrahim Mohammed</td>
                            </tr>
                            <tr>
                                <td><strong>Minutes Taker:</strong></td>
                                <td id="pdfMinutesTaker">Tahir Hasan</td>
                            </tr>
                        </table>
                    </div>

                    <div class="pdf-section">
                        <h3>ATTENDANCE</h3>
                        <table class="pdf-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Time</th>
                                </tr>
                            </thead>
                            <tbody id="pdfAttendanceTable">
                                <!-- Attendance will be populated -->
                            </tbody>
                        </table>
                    </div>

                    <div class="pdf-section">
                        <h3>AGENDA & DISCUSSION</h3>
                        <div id="pdfAgendaContent">
                            <!-- Agenda content will be populated -->
                        </div>
                    </div>

                    <div class="pdf-section">
                        <h3>DECISIONS MADE</h3>
                        <div id="pdfDecisionsContent">
                            <!-- Decisions will be populated -->
                        </div>
                    </div>

                    <div class="pdf-section">
                        <h3>ACTION ITEMS</h3>
                        <table class="pdf-table">
                            <thead>
                                <tr>
                                    <th>Task</th>
                                    <th>Assignee</th>
                                    <th>Deadline</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="pdfActionItemsTable">
                                <!-- Action items will be populated -->
                            </tbody>
                        </table>
                    </div>

                    <div class="pdf-section">
                        <h3>NEXT MEETING</h3>
                        <table class="pdf-table">
                            <tr>
                                <td width="30%"><strong>Date:</strong></td>
                                <td width="70%" id="pdfNextMeetingDate">Friday, November 7, 2025</td>
                            </tr>
                            <tr>
                                <td><strong>Time:</strong></td>
                                <td id="pdfNextMeetingTime">10:10 AM</td>
                            </tr>
                            <tr>
                                <td><strong>Venue:</strong></td>
                                <td id="pdfNextMeetingVenue">Communication, IT and Creative Design Room</td>
                            </tr>
                            <tr>
                                <td><strong>Agenda:</strong></td>
                                <td id="pdfNextMeetingAgenda">Handing over materials and follow-up discussions</td>
                            </tr>
                        </table>
                    </div>

                    <div class="pdf-signature">
                        <div class="signature-block">
                            <p><strong>Prepared by:</strong></p>
                            <div class="signature-line"></div>
                            <p id="pdfPreparedBy">Tahir Hasan</p>
                            <p>Secretary, SIT Student Council</p>
                        </div>
                        <div class="signature-block">
                            <p><strong>Approved by:</strong></p>
                            <div class="signature-line"></div>
                            <p id="pdfApprovedBy">Ibrahim Mohammed</p>
                            <p>President, SIT Student Council</p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 40px; font-size: 11px; color: #666; border-top: 1px solid #ddd; padding-top: 10px;">
                        SIT Student Council Portal | Generated by SBC System | Confidential Document
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toggle Switch CSS -->
    <style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border);
            transition: .4s;
            border-radius: 30px;
            border: 2px solid var(--border);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input:checked + .toggle-slider {
            background-color: var(--accent);
            border-color: var(--accent);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }

        input:focus + .toggle-slider {
            box-shadow: 0 0 1px var(--accent);
        }
    </style>

    <script>
        // ==================== ENHANCED DATABASE ====================
        const SBCDatabase = {
            // System Settings
            system: {
                version: "2.0.0",
                developer: "SBC 2026",
                lastBackup: new Date().toISOString(),
                theme: localStorage.getItem('sbc_theme') || 'light',
                autoSave: localStorage.getItem('sbc_auto_save') !== 'false',
                animations: true
            },

            // Controller Emails
            controllers: [
                "xaahaa12@gmail.com",
                "tahir.h.bedane@gmail.com",
                "tahirhasan432@gmail.com"
            ],

            // Council Members
            councilMembers: [
                {
                    id: "SIT-ST-2029-00123",
                    name: "Tahir Hasan",
                    email: "tahir.h.bedane@sit.edu",
                    role: "Secretary",
                    position: "Secretary",
                    avatar: "TH",
                    avatarColor: "#0066CC",
                    department: "Computer Science",
                    phone: "+251912345678",
                    joinDate: "2023-09-01",
                    status: "active",
                    password: "secretary123",
                    performance: {
                        meetingsAttended: 45,
                        tasksCompleted: 89,
                        rating: 98,
                        streak: 12,
                        achievements: ["Perfect Attendance", "Top Contributor", "Leadership Excellence"],
                        points: 1250,
                        manOfWeek: 3,
                        manOfMonth: 1
                    },
                    preferences: {
                        theme: "light",
                        notifications: true,
                        autoSave: true
                    }
                },
                {
                    id: "SIT-ST-2029-00124",
                    name: "Ibrahim Mohammed",
                    email: "ibrahim@sit.edu",
                    role: "President",
                    position: "President",
                    avatar: "IM",
                    avatarColor: "#009999",
                    department: "Business Administration",
                    phone: "+251912345679",
                    joinDate: "2023-09-01",
                    status: "active",
                    password: "president123",
                    performance: {
                        meetingsAttended: 42,
                        tasksCompleted: 76,
                        rating: 95,
                        streak: 8,
                        achievements: ["Strategic Planning", "Public Speaking", "Team Leader"],
                        points: 1100,
                        manOfWeek: 2,
                        manOfMonth: 2
                    }
                },
                {
                    id: "SIT-ST-2029-00125",
                    name: "Asli Ahmed",
                    email: "asli@sit.edu",
                    role: "Vice President",
                    position: "Vice President",
                    avatar: "AA",
                    avatarColor: "#FF6600",
                    department: "Engineering",
                    phone: "+251912345680",
                    joinDate: "2023-09-01",
                    status: "active",
                    password: "vicepresident123",
                    performance: {
                        meetingsAttended: 38,
                        tasksCompleted: 65,
                        rating: 92,
                        streak: 6,
                        achievements: ["Team Builder", "Event Organizer"],
                        points: 980,
                        manOfWeek: 1,
                        manOfMonth: 0
                    }
                },
                {
                    id: "SIT-ST-2029-00126",
                    name: "Fatima Ali",
                    email: "fatima@sit.edu",
                    role: "Treasurer",
                    position: "Treasurer",
                    avatar: "FA",
                    avatarColor: "#9933CC",
                    department: "Finance",
                    phone: "+251912345681",
                    joinDate: "2023-09-01",
                    status: "active",
                    password: "treasurer123",
                    performance: {
                        meetingsAttended: 40,
                        tasksCompleted: 72,
                        rating: 94,
                        streak: 10,
                        achievements: ["Budget Master", "Financial Planning"],
                        points: 1050,
                        manOfWeek: 0,
                        manOfMonth: 0
                    }
                }
            ],

            // Meetings Archive
            meetings: [
                {
                    id: "SC-2025-11-001",
                    title: "Taking responsibilities of members of the students' council officially",
                    type: "regular",
                    date: "2025-11-04",
                    startTime: "11:40",
                    endTime: "12:40",
                    venue: "SIT Administration Meeting Room",
                    chair: "Ibrahim Mohammed",
                    minutesTaker: "Tahir Hasan",
                    objective: "Official handover of responsibilities to new council members",
                    
                    attendees: [
                        { id: "SIT-ST-2029-00124", name: "Ibrahim Mohammed", role: "President", status: "present", time: "11:40" },
                        { id: "SIT-ST-2029-00125", name: "Asli Ahmed", role: "Vice President", status: "present", time: "11:40" },
                        { id: "SIT-ST-2029-00123", name: "Tahir Hasan", role: "Secretary", status: "present", time: "11:40" },
                        { id: "SIT-ST-2029-00126", name: "Fatima Ali", role: "Treasurer", status: "present", time: "11:40" }
                    ],
                    
                    agenda: [
                        { id: 1, title: "Opening and Call to Order", presenter: "President", duration: 5, status: "completed" },
                        { id: 2, title: "Taking responsibilities officially", presenter: "All Members", duration: 30, status: "completed" },
                        { id: 3, title: "Discussion on council activities", presenter: "Secretary", duration: 20, status: "completed" }
                    ],
                    
                    questions: [
                        { id: 1, question: "What are the main responsibilities?", askedBy: "New Member", answer: "Library, Gamezone, Shop, Hygiene, Laundry management", status: "answered" }
                    ],
                    
                    minutes: {
                        summary: "Council members officially took responsibilities over various areas of campus management. Detailed discussions were held about coordination and collaboration.",
                        decisions: [
                            "Council members officially took responsibilities",
                            "Areas assigned: Library, Gamezone, Shop, Hygiene (dorm & cafe), Laundry",
                            "Established collaboration framework for council activities"
                        ],
                        actionItems: [
                            { id: 1, task: "Prepare responsibility chart", assignee: "Tahir Hasan", deadline: "2025-11-06", status: "completed", priority: "high" },
                            { id: 2, task: "Schedule training sessions", assignee: "Asli Ahmed", deadline: "2025-11-10", status: "in-progress", priority: "medium" }
                        ],
                        nextMeeting: {
                            date: "2025-11-07",
                            time: "10:10",
                            venue: "Communication, IT and Creative Design Room",
                            agenda: "Handing over materials and follow-up discussions"
                        }
                    },
                    
                    status: "completed",
                    archived: true,
                    published: true,
                    createdAt: "2025-11-01T10:00:00Z",
                    updatedAt: "2025-11-04T16:30:00Z",
                    archivedAt: "2025-11-05T09:00:00Z"
                },
                {
                    id: "SC-2025-11-002",
                    title: "Handing over the materials of game zone to students' council officially",
                    type: "random",
                    date: "2025-11-07",
                    startTime: "10:10",
                    endTime: "11:20",
                    venue: "Communication, IT and Creative Design Room",
                    chair: "Ibrahim Mohammed",
                    minutesTaker: "Tahir Hasan",
                    objective: "Official handover of game zone materials and discussion of student guidelines",
                    
                    attendees: [
                        { id: "SIT-ST-2029-00124", name: "Ibrahim Mohammed", role: "President", status: "present", time: "10:10" },
                        { id: "SIT-ST-2029-00125", name: "Asli Ahmed", role: "Vice President", status: "present", time: "10:10" },
                        { id: "SIT-ST-2029-00123", name: "Tahir Hasan", role: "Secretary", status: "present", time: "10:10" },
                        { id: "SIT-ST-2029-00126", name: "Fatima Ali", role: "Treasurer", status: "present", time: "10:10" }
                    ],
                    
                    agenda: [
                        { id: 1, title: "Game zone materials handover", presenter: "Admin", duration: 15, status: "completed" },
                        { id: 2, title: "Student guidelines discussion", presenter: "President", duration: 25, status: "completed" },
                        { id: 3, title: "Club coordination", presenter: "Secretary", duration: 20, status: "completed" }
                    ],
                    
                    minutes: {
                        summary: "Game zone materials were officially handed over to the student council. Important student guidelines were discussed including cafe time respect, dress code, and hygiene standards.",
                        decisions: [
                            "Game zone officially handed over to student council",
                            "Stick and pool ball issues to be resolved soon",
                            "Club Telegram groups without coordinator recognition are not official",
                            "Drinkable water supply to be available in 2 months"
                        ],
                        actionItems: [
                            { id: 1, task: "Create game zone schedule", assignee: "Tahir Hasan", deadline: "2025-11-10", status: "pending", priority: "high" },
                            { id: 2, task: "Organize volunteer students", assignee: "Asli Ahmed", deadline: "2025-11-12", status: "pending", priority: "medium" }
                        ],
                        nextMeeting: {
                            date: "2025-11-18",
                            time: "10:00",
                            venue: "To be decided",
                            agenda: "Follow-up on action items and progress review"
                        }
                    },
                    
                    status: "completed",
                    archived: true,
                    published: true,
                    createdAt: "2025-11-05T14:00:00Z",
                    updatedAt: "2025-11-07T11:30:00Z",
                    archivedAt: "2025-11-08T10:00:00Z"
                }
            ],

            // Chat Messages
            chatMessages: [
                {
                    id: 1,
                    discussionId: "general",
                    senderId: "SIT-ST-2029-00123",
                    senderName: "Tahir Hasan",
                    senderRole: "Secretary",
                    message: "Welcome everyone to the official SIT Council Chat! This is our communication hub for all council-related discussions.",
                    timestamp: "2023-11-29 10:00:00",
                    reactions: { like: 5, heart: 2, celebrate: 1 },
                    replies: []
                },
                {
                    id: 2,
                    discussionId: "general",
                    senderId: "SIT-ST-2029-00124",
                    senderName: "Ibrahim Mohammed",
                    senderRole: "President",
                    message: "Great initiative! Let's use this platform effectively for better coordination and quick decision making.",
                    timestamp: "2023-11-29 10:05:00",
                    reactions: { like: 3 },
                    replies: []
                },
                {
                    id: 3,
                    discussionId: "general",
                    senderId: "SIT-ST-2029-00125",
                    senderName: "Asli Ahmed",
                    senderRole: "Vice President",
                    message: "I suggest we create separate threads for different topics: Events, Budget, Academics, etc.",
                    timestamp: "2023-11-29 10:15:00",
                    reactions: { like: 4, thumbsup: 2 },
                    replies: []
                }
            ],

            // Active Discussions
            discussions: [
                {
                    id: "general",
                    title: "General Council Chat",
                    description: "Main discussion channel for all council members",
                    participants: ["all"],
                    lastActivity: "2023-11-29 10:15:00",
                    unread: 0,
                    pinned: true
                },
                {
                    id: "cultural-fest",
                    title: "Cultural Fest Planning",
                    description: "Discussion about upcoming cultural festival",
                    participants: ["SIT-ST-2029-00123", "SIT-ST-2029-00125"],
                    lastActivity: "2023-11-28 16:30:00",
                    unread: 3,
                    pinned: true
                },
                {
                    id: "budget",
                    title: "Budget Committee",
                    description: "Financial discussions and budget planning",
                    participants: ["SIT-ST-2029-00124", "SIT-ST-2029-00126"],
                    lastActivity: "2023-11-28 14:20:00",
                    unread: 2,
                    pinned: false
                }
            ],

            // Council Updates
            updates: [
                {
                    id: 1,
                    title: "Cultural Fest 2023 Planning",
                    content: "The cultural fest is scheduled for December 15-17, 2023. All committee heads should submit their plans by December 5th.",
                    postedBy: "Tahir Hasan",
                    postedById: "SIT-ST-2029-00123",
                    timestamp: "2023-11-28 10:00:00",
                    category: "event",
                    priority: "high",
                    comments: 5,
                    likes: 12,
                    attachments: []
                },
                {
                    id: 2,
                    title: "New Meeting Portal Launched",
                    content: "The new SBC meeting management portal is now live! All members are requested to familiarize themselves with the features.",
                    postedBy: "Ibrahim Mohammed",
                    postedById: "SIT-ST-2029-00124",
                    timestamp: "2023-11-27 14:30:00",
                    category: "announcement",
                    priority: "medium",
                    comments: 8,
                    likes: 15,
                    attachments: []
                }
            ],

            // Performance Data
            performance: {
                manOfTheWeek: {
                    memberId: "SIT-ST-2029-00123",
                    name: "Tahir Hasan",
                    role: "Secretary",
                    reason: "For outstanding leadership in organizing the cultural fest and completing 15 action items this week",
                    stats: {
                        tasksCompleted: 15,
                        meetingsAttended: 5,
                        performanceScore: 98,
                        pointsEarned: 150
                    },
                    period: "Nov 20-27, 2023"
                },
                manOfTheMonth: {
                    memberId: "SIT-ST-2029-00124",
                    name: "Ibrahim Mohammed",
                    role: "President",
                    reason: "Exceptional strategic planning and team leadership throughout November 2023",
                    stats: {
                        tasksCompleted: 28,
                        meetingsAttended: 8,
                        performanceScore: 95,
                        pointsEarned: 320
                    },
                    period: "November 2023"
                },
                leaderboard: [
                    { memberId: "SIT-ST-2029-00123", name: "Tahir Hasan", role: "Secretary", score: 98, rank: 1 },
                    { memberId: "SIT-ST-2029-00124", name: "Ibrahim Mohammed", role: "President", score: 95, rank: 2 },
                    { memberId: "SIT-ST-2029-00126", name: "Fatima Ali", role: "Treasurer", score: 94, rank: 3 },
                    { memberId: "SIT-ST-2029-00125", name: "Asli Ahmed", role: "Vice President", score: 92, rank: 4 }
                ]
            },

            // Drafts
            drafts: {
                meeting: null,
                agenda: [],
                questions: [],
                minutes: null
            }
        };

        // ==================== STATE MANAGEMENT ====================
        let currentUser = null;
        let currentPage = 'dashboard';
        let autoSaveInterval = null;
        let autoSaveEnabled = SBCDatabase.system.autoSave;
        let currentTheme = SBCDatabase.system.theme;
        let currentDiscussion = 'general';
        let unsavedChanges = false;

        // ==================== DOM ELEMENTS ====================
        const authContainer = document.getElementById('authContainer');
        const appContainer = document.getElementById('appContainer');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const toastContainer = document.getElementById('toastContainer');
        const loginForm = document.getElementById('loginForm');
        const themeToggle = document.getElementById('themeToggle');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const logoutBtn = document.getElementById('logoutBtn');
        const navItems = document.querySelectorAll('.nav-item');
        const pageContents = document.querySelectorAll('.page-content');
        const userProfile = document.getElementById('userProfile');

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            setupEventListeners();
            checkAuthStatus();
            applyTheme(currentTheme);
            updateSystemInfo();
        });

        function initializeApp() {
            // Load saved user session
            const savedUser = localStorage.getItem('sbc_current_user');
            const savedSession = localStorage.getItem('sbc_user_session');
            
            if (savedUser && savedSession) {
                const session = JSON.parse(savedSession);
                if (session.expiry > Date.now()) {
                    currentUser = JSON.parse(savedUser);
                } else {
                    localStorage.removeItem('sbc_current_user');
                    localStorage.removeItem('sbc_user_session');
                }
            }

            // Load drafts
            loadDrafts();

            // Start auto-save if enabled
            if (autoSaveEnabled) {
                startAutoSave();
            }

            // Initialize charts
            initializeCharts();

            // Set up beforeunload warning
            window.addEventListener('beforeunload', (e) => {
                if (unsavedChanges) {
                    e.preventDefault();
                    e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                }
            });
        }

        function setupEventListeners() {
            // Login Form
            loginForm.addEventListener('submit', handleLogin);

            // Theme Toggle
            themeToggle.addEventListener('click', toggleTheme);

            // Menu Toggle
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });

            // Navigation
            navItems.forEach(item => {
                if (item.dataset.page) {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (item.dataset.page === 'logout') {
                            logout();
                        } else {
                            navigateTo(item.dataset.page);
                        }
                    });
                }
            });

            // Logout
            logoutBtn.addEventListener('click', logout);

            // User Profile Dropdown
            userProfile.addEventListener('click', showUserMenu);

            // Quick Actions
            document.getElementById('quickMeetingBtn')?.addEventListener('click', () => {
                navigateTo('new-meeting');
            });

            document.getElementById('refreshDashboardBtn')?.addEventListener('click', () => {
                loadDashboard();
                showToast('Dashboard refreshed', 'success');
            });

            document.getElementById('generateReportBtn')?.addEventListener('click', generateReport);

            // Meeting Type Selection
            document.querySelectorAll('.meeting-type-selector').forEach(selector => {
                selector.addEventListener('click', function() {
                    const input = this.querySelector('input');
                    if (input) {
                        input.checked = true;
                        updateMeetingTypeVisual();
                    }
                });
            });

            // Proceed to Agenda
            document.getElementById('proceedToAgendaBtn')?.addEventListener('click', () => {
                if (validateMeetingForm()) {
                    navigateTo('agenda');
                    showToast('Meeting information saved', 'success');
                }
            });

            // Save Draft
            document.getElementById('saveMeetingDraftBtn')?.addEventListener('click', saveMeetingDraft);

            // Schedule Meeting
            document.getElementById('scheduleMeetingBtn')?.addEventListener('click', scheduleMeeting);

            // Chat
            document.getElementById('sendMessageBtn')?.addEventListener('click', sendMessage);
            document.getElementById('messageInput')?.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
            });

            document.getElementById('newDiscussionBtn')?.addEventListener('click', createNewDiscussion);
            document.getElementById('clearChatBtn')?.addEventListener('click', clearChat);

            // Settings
            document.getElementById('saveSettingsBtn')?.addEventListener('click', saveSettings);
            document.getElementById('changePasswordBtn')?.addEventListener('click', changePassword);
            document.getElementById('darkModeToggle')?.addEventListener('change', (e) => {
                toggleTheme(e.target.checked ? 'dark' : 'light');
            });

            // PDF Generation
            document.getElementById('generatePdfBtn')?.addEventListener('click', generatePDF);
            document.getElementById('printPdfBtn')?.addEventListener('click', () => {
                window.print();
            });

            // Form Auto-save
            setupFormAutoSave();

            // Window resize
            window.addEventListener('resize', handleResize);
        }

        function checkAuthStatus() {
            if (currentUser) {
                showApp();
            } else {
                showAuth();
            }
        }

        // ==================== THEME MANAGEMENT ====================
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('sbc_theme', theme);
            SBCDatabase.system.theme = theme;
            
            // Update theme toggle icon
            const themeIcon = themeToggle.querySelector('i');
            themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            
            // Update toggle switch in settings
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (darkModeToggle) {
                darkModeToggle.checked = theme === 'dark';
            }
            
            currentTheme = theme;
            
            // Update user preference if logged in
            if (currentUser && currentUser.preferences) {
                currentUser.preferences.theme = theme;
                saveUserData();
            }
        }

        function toggleTheme(theme = null) {
            const newTheme = theme || (currentTheme === 'light' ? 'dark' : 'light');
            applyTheme(newTheme);
            showToast(`Switched to ${newTheme} mode`, 'info');
        }

        // ==================== AUTHENTICATION ====================
        function showLoading(message = 'Loading...') {
            loadingOverlay.querySelector('p').textContent = message;
            loadingOverlay.classList.add('show');
        }

        function hideLoading() {
            loadingOverlay.classList.remove('show');
        }

        function showToast(message, type = 'success', duration = 5000) {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                warning: 'exclamation-triangle',
                info: 'info-circle'
            };

            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-${icons[type]}"></i>
                </div>
                <div class="toast-content">
                    <h4>${type.charAt(0).toUpperCase() + type.slice(1)}</h4>
                    <p>${message}</p>
                </div>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
            `;

            toastContainer.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            // Close button
            toast.querySelector('.toast-close').addEventListener('click', () => {
                hideToast(toast);
            });

            // Auto remove
            setTimeout(() => {
                hideToast(toast);
            }, duration);

            return toast;
        }

        function hideToast(toast) {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const studentId = document.getElementById('studentId').value;
            
            // Validation
            if (!email || !password || !studentId) {
                showToast('Please fill all fields', 'error');
                return;
            }
            
            if (!email.endsWith('@sit.edu') && !SBCDatabase.controllers.includes(email)) {
                showToast('Please use your SIT email address', 'error');
                return;
            }
            
            if (!studentId.match(/^SIT-ST-2029-00\d{3}$/) && !SBCDatabase.controllers.includes(email)) {
                showToast('Invalid Student ID format. Use: SIT-ST-2029-00XXX', 'error');
                return;
            }
            
            showLoading('Authenticating...');
            
            // Simulate API delay
            setTimeout(() => {
                let user = null;
                
                // Check controllers
                if (SBCDatabase.controllers.includes(email)) {
                    user = {
                        id: "CONTROLLER-001",
                        name: "System Controller",
                        email: email,
                        role: "Controller",
                        position: "System Administrator",
                        avatar: "CT",
                        avatarColor: "#FF6600",
                        department: "Administration",
                        studentId: "CONTROLLER",
                        isController: true
                    };
                } else {
                    // Check council members
                    user = SBCDatabase.councilMembers.find(member => 
                        member.email === email && 
                        member.password === password && 
                        member.id === studentId
                    );
                }
                
                if (user) {
                    currentUser = user;
                    
                    // Create session
                    const session = {
                        userId: user.id,
                        loginTime: new Date().toISOString(),
                        expiry: Date.now() + (7 * 24 * 60 * 60 * 1000) // 7 days
                    };
                    
                    // Save to localStorage
                    localStorage.setItem('sbc_current_user', JSON.stringify(user));
                    localStorage.setItem('sbc_user_session', JSON.stringify(session));
                    
                    showApp();
                    showToast(`Welcome ${user.name}!`, 'success');
                    
                    // Apply user's theme preference
                    if (user.preferences?.theme) {
                        applyTheme(user.preferences.theme);
                    }
                    
                    // Update login count
                    updateLoginStats();
                } else {
                    showToast('Invalid credentials. Contact controller for access.', 'error');
                }
                
                hideLoading();
            }, 1500);
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                localStorage.removeItem('sbc_current_user');
                localStorage.removeItem('sbc_user_session');
                showAuth();
                showToast('Logged out successfully', 'info');
            }
        }

        // ==================== NAVIGATION ====================
        function showAuth() {
            authContainer.style.display = 'flex';
            appContainer.style.display = 'none';
            loginForm.reset();
        }

        function showApp() {
            authContainer.style.display = 'none';
            appContainer.style.display = 'block';
            updateUserInfo();
            navigateTo('dashboard');
        }

        function updateUserInfo() {
            if (!currentUser) return;
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.role;
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            document.getElementById('greetingName').textContent = currentUser.name.split(' ')[0];
            
            // Update profile in settings
            if (document.getElementById('profileName')) {
                document.getElementById('profileName').value = currentUser.name;
                document.getElementById('profileEmail').value = currentUser.email;
                document.getElementById('profileStudentId').value = currentUser.studentId;
                document.getElementById('profileRole').value = currentUser.role;
                document.getElementById('profileAvatar').textContent = currentUser.avatar;
            }
            
            // Set avatar background color
            const avatars = document.querySelectorAll('.user-avatar, #profileAvatar');
            avatars.forEach(avatar => {
                avatar.style.background = currentUser.avatarColor || 
                    `linear-gradient(135deg, var(--sit-blue), var(--sit-teal))`;
            });
        }

        function navigateTo(page) {
            if (currentPage === page) return;
            
            // Check for unsaved changes
            if (unsavedChanges && !confirm('You have unsaved changes. Are you sure you want to navigate away?')) {
                return;
            }
            
            currentPage = page;
            
            // Update navigation
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            const activeNav = document.querySelector(`.nav-item[data-page="${page}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            // Update content
            pageContents.forEach(content => {
                content.classList.remove('active');
            });
            
            const activeContent = document.getElementById(`${page}Content`);
            if (activeContent) {
                activeContent.classList.add('active');
            }

            // Close sidebar on mobile
            if (window.innerWidth <= 1024) {
                sidebar.classList.remove('active');
            }

            // Load page-specific data
            loadPageData(page);
            
            // Reset unsaved changes flag
            unsavedChanges = false;
        }

        function loadPageData(page) {
            switch(page) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'performance':
                    loadPerformance();
                    break;
                case 'chat':
                    loadChat();
                    break;
                case 'new-meeting':
                    loadNewMeeting();
                    break;
                case 'meeting-info':
                    loadMeetingInfo();
                    break;
                case 'agenda':
                    loadAgenda();
                    break;
                case 'questions':
                    loadQuestions();
                    break;
                case 'attendance':
                    loadAttendance();
                    break;
                case 'minutes-actions':
                    loadMinutesActions();
                    break;
                case 'publish':
                    loadPublish();
                    break;
                case 'calendar':
                    loadCalendar();
                    break;
                case 'archive':
                    loadArchive();
                    break;
                case 'members':
                    loadMembers();
                    break;
                case 'settings':
                    loadSettingsPage();
                    break;
                case 'pdf-export':
                    loadPDFExport();
                    break;
            }
        }

        // ==================== DASHBOARD FUNCTIONS ====================
        function loadDashboard() {
            // Update stats
            document.getElementById('meetingsCount').textContent = SBCDatabase.meetings.length;
            
            const totalTasks = SBCDatabase.meetings.reduce((acc, meeting) => 
                acc + (meeting.minutes?.actionItems?.length || 0), 0
            );
            document.getElementById('tasksCount').textContent = totalTasks;
            
            document.getElementById('membersCount').textContent = SBCDatabase.councilMembers.length;
            document.getElementById('messagesCount').textContent = SBCDatabase.chatMessages.length;
            
            // Update badges
            document.getElementById('dashboardBadge').textContent = '3';
            document.getElementById('chatBadge').textContent = SBCDatabase.chatMessages.length.toString();
            document.getElementById('calendarBadge').textContent = '5';
            document.getElementById('archiveBadge').textContent = SBCDatabase.meetings.filter(m => m.archived).length.toString();
            
            // Update top performer
            const performer = SBCDatabase.performance.manOfTheWeek;
            if (performer) {
                const performerElement = document.querySelector('.top-performer .performer-name');
                if (performerElement) {
                    performerElement.textContent = performer.name;
                }
            }
        }

        function generateReport() {
            showLoading('Generating monthly report...');
            
            setTimeout(() => {
                // Generate PDF report
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Set Times New Roman font
                doc.setFont("times");
                
                // Add SBC Logo (placeholder)
                doc.addImage('https://via.placeholder.com/150x50/0066CC/FFFFFF?text=SIT+SBC', 'PNG', 20, 20, 40, 15);
                
                // Title
                doc.setFontSize(20);
                doc.setTextColor(0, 102, 204);
                doc.text("SIT STUDENT COUNCIL", 105, 30, null, null, "center");
                
                doc.setFontSize(16);
                doc.setTextColor(0, 153, 153);
                doc.text("MONTHLY PERFORMANCE REPORT", 105, 40, null, null, "center");
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Report Period: November 2023`, 20, 60);
                doc.text(`Generated: ${new Date().toLocaleDateString()}`, 20, 70);
                
                // Performance Summary
                doc.setFontSize(14);
                doc.setFont("times", "bold");
                doc.text("PERFORMANCE SUMMARY", 20, 90);
                
                doc.setFontSize(12);
                doc.setFont("times", "normal");
                doc.text(`Total Meetings: ${SBCDatabase.meetings.length}`, 20, 105);
                doc.text(`Completed Tasks: ${SBCDatabase.meetings.reduce((acc, m) => acc + (m.minutes?.actionItems?.filter(a => a.status === 'completed').length || 0), 0)}`, 20, 115);
                doc.text(`Active Members: ${SBCDatabase.councilMembers.length}`, 20, 125);
                
                // Top Performers
                doc.setFontSize(14);
                doc.setFont("times", "bold");
                doc.text("TOP PERFORMERS", 20, 145);
                
                let yPos = 160;
                SBCDatabase.performance.leaderboard.slice(0, 3).forEach((member, index) => {
                    doc.setFontSize(12);
                    doc.setFont("times", "normal");
                    doc.text(`${index + 1}. ${member.name} (${member.role}) - Score: ${member.score}%`, 20, yPos);
                    yPos += 10;
                });
                
                // Save PDF
                doc.save(`SBC_Performance_Report_${new Date().getFullYear()}_${new Date().getMonth() + 1}.pdf`);
                
                showToast('Monthly report generated successfully!', 'success');
                hideLoading();
            }, 2000);
        }

        // ==================== PERFORMANCE DASHBOARD ====================
        function loadPerformance() {
            // Update leaderboard
            const leaderboardTable = document.getElementById('leaderboardTable');
            if (leaderboardTable) {
                leaderboardTable.innerHTML = SBCDatabase.performance.leaderboard.map(member => `
                    <tr style="border-bottom: 1px solid var(--border);">
                        <td style="padding: 15px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 30px; height: 30px; background: ${member.rank <= 3 ? 'var(--accent)' : 'var(--bg-tertiary)'}; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                    ${member.rank}
                                </div>
                            </div>
                        </td>
                        <td style="padding: 15px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--sit-blue), var(--sit-teal)); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                    ${member.name.split(' ').map(n => n[0]).join('')}
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">${member.name}</div>
                                    <div style="font-size: 12px; color: var(--text-tertiary);">${member.role}</div>
                                </div>
                            </div>
                        </td>
                        <td style="padding: 15px; color: var(--text-primary); font-weight: 600;">${member.role}</td>
                        <td style="padding: 15px;">
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <div style="width: 100px; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                                    <div style="width: ${member.score}%; height: 100%; background: var(--success);"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-primary);">${member.score}%</span>
                            </div>
                        </td>
                        <td style="padding: 15px; color: var(--text-primary); font-weight: 600;">${SBCDatabase.councilMembers.find(m => m.id === member.memberId)?.performance?.meetingsAttended || 0}</td>
                        <td style="padding: 15px; color: var(--text-primary); font-weight: 600;">${SBCDatabase.councilMembers.find(m => m.id === member.memberId)?.performance?.tasksCompleted || 0}</td>
                    </tr>
                `).join('');
            }
            
            // Initialize chart
            initializePerformanceChart();
        }

        function initializePerformanceChart() {
            const ctx = document.getElementById('performanceChart')?.getContext('2d');
            if (!ctx) return;
            
            const members = SBCDatabase.performance.leaderboard.slice(0, 5);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: members.map(m => m.name),
                    datasets: [{
                        label: 'Performance Score',
                        data: members.map(m => m.score),
                        backgroundColor: 'rgba(0, 150, 136, 0.7)',
                        borderColor: 'rgba(0, 150, 136, 1)',
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Top 5 Performers',
                            color: 'var(--text-primary)',
                            font: {
                                size: 16,
                                family: 'var(--font-heading)'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: 'var(--text-secondary)'
                            },
                            grid: {
                                color: 'var(--border)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'var(--text-secondary)'
                            },
                            grid: {
                                color: 'var(--border)'
                            }
                        }
                    }
                }
            });
        }

        // ==================== CHAT FUNCTIONS ====================
        function loadChat() {
            loadDiscussions();
            loadChatMessages();
            loadCouncilUpdates();
        }

        function loadDiscussions() {
            const discussionList = document.getElementById('discussionList');
            if (!discussionList) return;
            
            discussionList.innerHTML = SBCDatabase.discussions.map(discussion => `
                <div class="discussion-item" data-discussion-id="${discussion.id}" 
                     style="padding: 12px; margin-bottom: 10px; background: ${currentDiscussion === discussion.id ? 'var(--bg-tertiary)' : 'var(--bg-secondary)'}; 
                            border-radius: 10px; border: 2px solid ${currentDiscussion === discussion.id ? 'var(--accent)' : 'transparent'}; 
                            cursor: pointer; transition: var(--transition);">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 5px;">
                                ${discussion.pinned ? 'üìå ' : ''}${discussion.title}
                            </div>
                            <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: 8px;">
                                ${discussion.description}
                            </div>
                            <div style="font-size: 11px; color: var(--text-tertiary);">
                                <i class="far fa-clock"></i> ${formatTimeAgo(discussion.lastActivity)}
                            </div>
                        </div>
                        ${discussion.unread > 0 ? `
                            <span style="background: var(--accent); color: white; font-size: 11px; font-weight: 700; 
                                         padding: 2px 8px; border-radius: 10px; min-width: 20px; text-align: center;">
                                ${discussion.unread}
                            </span>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            // Add click listeners
            document.querySelectorAll('.discussion-item').forEach(item => {
                item.addEventListener('click', function() {
                    const discussionId = this.dataset.discussionId;
                    switchDiscussion(discussionId);
                });
            });
        }

        function switchDiscussion(discussionId) {
            currentDiscussion = discussionId;
            loadDiscussions();
            loadChatMessages();
        }

        function loadChatMessages() {
            const chatMessages = document.getElementById('chatMessages');
            if (!chatMessages) return;
            
            const messages = SBCDatabase.chatMessages.filter(msg => msg.discussionId === currentDiscussion);
            
            chatMessages.innerHTML = messages.map(msg => {
                const isCurrentUser = msg.senderId === currentUser?.id;
                const member = SBCDatabase.councilMembers.find(m => m.id === msg.senderId);
                
                return `
                    <div class="message ${isCurrentUser ? 'sent' : ''}">
                        <div class="message-header">
                            <div class="message-sender">
                                <div class="sender-avatar" style="background: ${member?.avatarColor || '#0066CC'}">
                                    ${member?.avatar || msg.senderName.substring(0, 2)}
                                </div>
                                ${msg.senderName}
                                <span style="font-size: 12px; color: var(--text-tertiary);">(${msg.senderRole})</span>
                            </div>
                            <div class="message-time">${formatDateTime(msg.timestamp)}</div>
                        </div>
                        <div class="message-content">${msg.message}</div>
                        <div class="message-reactions">
                            ${Object.entries(msg.reactions || {}).map(([reaction, count]) => `
                                <button class="reaction-btn" onclick="addReaction(${msg.id}, '${reaction}')">
                                    ${getReactionEmoji(reaction)} ${count}
                                </button>
                            `).join('')}
                            <button class="reaction-btn" onclick="showReactionMenu(${msg.id})">
                                <i class="fas fa-smile"></i>
                            </button>
                            <button class="reaction-btn" onclick="replyToMessage(${msg.id})">
                                <i class="fas fa-reply"></i>
                            </button>
                        </div>
                        ${msg.replies?.length > 0 ? `
                            <div style="margin-top: 10px; padding-left: 20px; border-left: 2px solid var(--border);">
                                ${msg.replies.map(reply => `
                                    <div style="font-size: 13px; color: var(--text-tertiary); margin-bottom: 5px;">
                                        <strong>${reply.senderName}:</strong> ${reply.message}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) {
                showToast('Please enter a message', 'warning');
                return;
            }
            
            if (!currentUser) {
                showToast('You must be logged in to send messages', 'error');
                return;
            }
            
            const newMessage = {
                id: SBCDatabase.chatMessages.length + 1,
                discussionId: currentDiscussion,
                senderId: currentUser.id,
                senderName: currentUser.name,
                senderRole: currentUser.role,
                message: message,
                timestamp: new Date().toISOString().replace('T', ' ').substring(0, 19),
                reactions: {},
                replies: []
            };
            
            SBCDatabase.chatMessages.push(newMessage);
            
            // Update discussion last activity
            const discussion = SBCDatabase.discussions.find(d => d.id === currentDiscussion);
            if (discussion) {
                discussion.lastActivity = newMessage.timestamp;
                discussion.unread = (discussion.unread || 0) + 1;
            }
            
            loadChat();
            input.value = '';
            input.focus();
            
            showToast('Message sent', 'success');
            markUnsavedChanges();
        }

        function addReaction(messageId, reaction) {
            const message = SBCDatabase.chatMessages.find(m => m.id === messageId);
            if (message) {
                if (!message.reactions) {
                    message.reactions = {};
                }
                message.reactions[reaction] = (message.reactions[reaction] || 0) + 1;
                loadChatMessages();
                markUnsavedChanges();
            }
        }

        function clearChat() {
            if (confirm('Are you sure you want to clear all chat messages?')) {
                SBCDatabase.chatMessages = SBCDatabase.chatMessages.filter(msg => msg.discussionId !== currentDiscussion);
                loadChat();
                showToast('Chat cleared', 'success');
                markUnsavedChanges();
            }
        }

        function createNewDiscussion() {
            const title = prompt('Enter discussion title:');
            if (!title) return;
            
            const description = prompt('Enter description (optional):');
            
            const newDiscussion = {
                id: `discussion-${Date.now()}`,
                title: title,
                description: description || 'New discussion',
                participants: [currentUser.id],
                lastActivity: new Date().toISOString().replace('T', ' ').substring(0, 19),
                unread: 0,
                pinned: false
            };
            
            SBCDatabase.discussions.push(newDiscussion);
            switchDiscussion(newDiscussion.id);
            showToast('New discussion created', 'success');
            markUnsavedChanges();
        }

        function loadCouncilUpdates() {
            const updatesContainer = document.getElementById('councilUpdates');
            if (!updatesContainer) return;
            
            updatesContainer.innerHTML = SBCDatabase.updates.map(update => `
                <div style="padding: 20px; border-bottom: 2px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <div>
                            <h4 style="color: var(--text-primary); font-size: 18px; margin-bottom: 8px;">
                                ${update.priority === 'high' ? 'üî¥ ' : update.priority === 'medium' ? 'üü° ' : 'üü¢ '}${update.title}
                            </h4>
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                                <span style="font-size: 12px; color: var(--text-tertiary);">
                                    <i class="fas fa-user"></i> ${update.postedBy}
                                </span>
                                <span style="font-size: 12px; color: var(--text-tertiary);">
                                    <i class="far fa-clock"></i> ${formatDateTime(update.timestamp)}
                                </span>
                                <span style="font-size: 12px; color: var(--accent); background: var(--accent-light); 
                                        padding: 2px 10px; border-radius: 12px;">
                                    ${update.category}
                                </span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-icon" onclick="likeUpdate(${update.id})" title="Like">
                                <i class="fas fa-thumbs-up"></i> ${update.likes}
                            </button>
                            <button class="btn-icon" onclick="commentOnUpdate(${update.id})" title="Comment">
                                <i class="fas fa-comment"></i> ${update.comments}
                            </button>
                        </div>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 15px;">
                        ${update.content}
                    </p>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-outline" onclick="shareUpdate(${update.id})" style="font-size: 12px; padding: 6px 12px;">
                            <i class="fas fa-share"></i> Share
                        </button>
                        ${currentUser?.isController ? `
                            <button class="btn btn-outline" onclick="editUpdate(${update.id})" style="font-size: 12px; padding: 6px 12px;">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-outline" onclick="deleteUpdate(${update.id})" style="font-size: 12px; padding: 6px 12px;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        // ==================== MEETING MANAGEMENT ====================
        function loadNewMeeting() {
            // Generate meeting code
            const now = new Date();
            const meetingCode = `SC-${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}-${String(SBCDatabase.meetings.length + 1).padStart(3, '0')}`;
            document.getElementById('meetingCode').value = meetingCode;
            
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('meetingDate').value = tomorrow.toISOString().split('T')[0];
            
            // Set default times
            document.getElementById('meetingStartTime').value = '10:00';
            document.getElementById('meetingEndTime').value = '12:00';
            
            // Populate chairperson dropdown
            const chairSelect = document.getElementById('meetingChair');
            if (chairSelect) {
                chairSelect.innerHTML = '<option value="">Select Chairperson</option>' +
                    SBCDatabase.councilMembers.map(member => 
                        `<option value="${member.id}">${member.name} (${member.role})</option>`
                    ).join('');
            }
            
            // Load draft if exists
            loadMeetingDraft();
        }

        function validateMeetingForm() {
            const title = document.getElementById('meetingTitle').value.trim();
            const date = document.getElementById('meetingDate').value;
            const startTime = document.getElementById('meetingStartTime').value;
            const endTime = document.getElementById('meetingEndTime').value;
            const location = document.getElementById('meetingLocation').value.trim();
            const chair = document.getElementById('meetingChair').value;
            
            if (!title) {
                showToast('Please enter meeting title', 'error');
                return false;
            }
            
            if (!date) {
                showToast('Please select meeting date', 'error');
                return false;
            }
            
            if (!startTime || !endTime) {
                showToast('Please select meeting times', 'error');
                return false;
            }
            
            if (!location) {
                showToast('Please enter meeting location', 'error');
                return false;
            }
            
            if (!chair) {
                showToast('Please select chairperson', 'error');
                return false;
            }
            
            return true;
        }

        function saveMeetingDraft() {
            const meetingData = {
                title: document.getElementById('meetingTitle').value,
                type: document.querySelector('input[name="meetingType"]:checked')?.value || 'regular',
                code: document.getElementById('meetingCode').value,
                date: document.getElementById('meetingDate').value,
                startTime: document.getElementById('meetingStartTime').value,
                endTime: document.getElementById('meetingEndTime').value,
                location: document.getElementById('meetingLocation').value,
                chair: document.getElementById('meetingChair').value,
                objective: document.getElementById('meetingObjective').value,
                lastSaved: new Date().toISOString()
            };
            
            SBCDatabase.drafts.meeting = meetingData;
            localStorage.setItem('sbc_meeting_draft', JSON.stringify(meetingData));
            
            showToast('Meeting draft saved', 'success');
            updateAutoSaveIndicator('meeting', true);
        }

        function loadMeetingDraft() {
            const draft = localStorage.getItem('sbc_meeting_draft');
            if (draft) {
                try {
                    const meetingData = JSON.parse(draft);
                    
                    document.getElementById('meetingTitle').value = meetingData.title || '';
                    document.getElementById('meetingCode').value = meetingData.code || '';
                    document.getElementById('meetingDate').value = meetingData.date || '';
                    document.getElementById('meetingStartTime').value = meetingData.startTime || '';
                    document.getElementById('meetingEndTime').value = meetingData.endTime || '';
                    document.getElementById('meetingLocation').value = meetingData.location || '';
                    document.getElementById('meetingChair').value = meetingData.chair || '';
                    document.getElementById('meetingObjective').value = meetingData.objective || '';
                    
                    // Set meeting type
                    if (meetingData.type) {
                        document.getElementById(`${meetingData.type}Meeting`).checked = true;
                        updateMeetingTypeVisual();
                    }
                    
                    showToast('Loaded saved draft', 'info');
                } catch (e) {
                    console.error('Error loading draft:', e);
                }
            }
        }

        function scheduleMeeting() {
            if (!validateMeetingForm()) return;
            
            showLoading('Scheduling meeting...');
            
            setTimeout(() => {
                const meetingData = {
                    id: document.getElementById('meetingCode').value,
                    title: document.getElementById('meetingTitle').value,
                    type: document.querySelector('input[name="meetingType"]:checked')?.value || 'regular',
                    date: document.getElementById('meetingDate').value,
                    startTime: document.getElementById('meetingStartTime').value,
                    endTime: document.getElementById('meetingEndTime').value,
                    venue: document.getElementById('meetingLocation').value,
                    chair: document.getElementById('meetingChair').value,
                    objective: document.getElementById('meetingObjective').value,
                    status: 'scheduled',
                    archived: false,
                    published: false,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                SBCDatabase.meetings.push(meetingData);
                
                // Clear draft
                SBCDatabase.drafts.meeting = null;
                localStorage.removeItem('sbc_meeting_draft');
                
                showToast('Meeting scheduled successfully!', 'success');
                
                // Navigate to meeting info
                navigateTo('meeting-info');
                hideLoading();
            }, 1500);
        }

        // ==================== ARCHIVE FUNCTIONS ====================
        function loadArchive() {
            const archivedMeetings = SBCDatabase.meetings.filter(m => m.archived);
            
            // Update stats
            document.getElementById('totalMeetingsArchived').textContent = archivedMeetings.length;
            document.getElementById('thisYearArchived').textContent = archivedMeetings.filter(m => 
                new Date(m.archivedAt).getFullYear() === new Date().getFullYear()
            ).length;
            document.getElementById('thisMonthArchived').textContent = archivedMeetings.filter(m => 
                new Date(m.archivedAt).getMonth() === new Date().getMonth() &&
                new Date(m.archivedAt).getFullYear() === new Date().getFullYear()
            ).length;
            
            // Load archive grid
            const archiveGrid = document.getElementById('archiveGrid');
            if (archiveGrid) {
                archiveGrid.innerHTML = archivedMeetings.map(meeting => `
                    <div class="archive-card">
                        <div class="archive-header">
                            <h3 class="archive-title">${meeting.title}</h3>
                            <span class="archive-date">${formatDate(meeting.date)}</span>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <span class="meeting-type-badge meeting-type-${meeting.type}">
                                <i class="fas fa-${meeting.type === 'regular' ? 'calendar-check' : 'bolt'}"></i>
                                ${meeting.type === 'regular' ? 'Regular' : 'Random'} Meeting
                            </span>
                        </div>
                        <p class="archive-content">${meeting.objective || 'No description available'}</p>
                        <div class="archive-actions">
                            <button class="btn btn-outline" onclick="viewArchivedMeeting('${meeting.id}')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-outline" onclick="restoreMeeting('${meeting.id}')">
                                <i class="fas fa-undo"></i> Restore
                            </button>
                            <button class="btn btn-outline" onclick="downloadMeetingPDF('${meeting.id}')">
                                <i class="fas fa-download"></i> PDF
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ==================== MEMBERS MANAGEMENT ====================
        function loadMembers() {
            const grid = document.getElementById('councilMembersGrid');
            if (!grid) return;
            
            grid.innerHTML = SBCDatabase.councilMembers.map(member => `
                <div class="member-card">
                    <div class="member-avatar" style="background: ${member.avatarColor}">
                        ${member.avatar}
                    </div>
                    <h3 class="member-name">${member.name}</h3>
                    <div class="member-role">${member.role}</div>
                    <div class="member-id">${member.id}</div>
                    <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 10px;">
                        <i class="fas fa-envelope"></i> ${member.email}
                    </div>
                    <div style="color: var(--text-tertiary); font-size: 13px; margin-bottom: 15px;">
                        <i class="fas fa-graduation-cap"></i> ${member.department}
                    </div>
                    <div class="member-stats">
                        <div class="member-stat">
                            <div class="member-stat-value">${member.performance?.meetingsAttended || 0}</div>
                            <div class="member-stat-label">Meetings</div>
                        </div>
                        <div class="member-stat">
                            <div class="member-stat-value">${member.performance?.tasksCompleted || 0}</div>
                            <div class="member-stat-label">Tasks</div>
                        </div>
                        <div class="member-stat">
                            <div class="member-stat-value">${member.performance?.rating || 0}%</div>
                            <div class="member-stat-label">Score</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="messageMember('${member.id}')">
                            <i class="fas fa-envelope"></i> Message
                        </button>
                        ${currentUser?.isController ? `
                            <button class="btn btn-outline" style="flex: 1;" onclick="editMember('${member.id}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        // ==================== SETTINGS ====================
        function loadSettingsPage() {
            // Set current values
            document.getElementById('darkModeToggle').checked = currentTheme === 'dark';
            document.getElementById('autoSaveToggle').checked = autoSaveEnabled;
            document.getElementById('emailNotifications').checked = true;
            document.getElementById('chatNotifications').checked = true;
            document.getElementById('meetingReminders').checked = true;
            document.getElementById('animationsToggle').checked = SBCDatabase.system.animations;
        }

        function saveSettings() {
            // Save theme preference
            const darkMode = document.getElementById('darkModeToggle').checked;
            applyTheme(darkMode ? 'dark' : 'light');
            
            // Save auto-save preference
            autoSaveEnabled = document.getElementById('autoSaveToggle').checked;
            SBCDatabase.system.autoSave = autoSaveEnabled;
            localStorage.setItem('sbc_auto_save', autoSaveEnabled);
            
            if (autoSaveEnabled) {
                startAutoSave();
            } else {
                stopAutoSave();
            }
            
            // Save other preferences
            SBCDatabase.system.animations = document.getElementById('animationsToggle').checked;
            
            showToast('Settings saved successfully', 'success');
            markUnsavedChanges();
        }

        function changePassword() {
            const currentPass = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;
            
            if (!currentPass || !newPass || !confirmPass) {
                showToast('Please fill all password fields', 'error');
                return;
            }
            
            if (newPass !== confirmPass) {
                showToast('New passwords do not match', 'error');
                return;
            }
            
            if (newPass.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            // In a real app, verify current password with backend
            showLoading('Changing password...');
            
            setTimeout(() => {
                // Update user password
                if (currentUser && !currentUser.isController) {
                    const member = SBCDatabase.councilMembers.find(m => m.id === currentUser.id);
                    if (member) {
                        member.password = newPass;
                    }
                }
                
                showToast('Password changed successfully!', 'success');
                
                // Clear fields
                document.getElementById('currentPassword').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmPassword').value = '';
                
                hideLoading();
                markUnsavedChanges();
            }, 1500);
        }

        // ==================== PDF GENERATION ====================
        function loadPDFExport() {
            // Load latest meeting data into PDF preview
            const latestMeeting = SBCDatabase.meetings[SBCDatabase.meetings.length - 1];
            if (latestMeeting) {
                document.getElementById('pdfMeetingTitle').textContent = latestMeeting.title;
                document.getElementById('pdfMeetingDate').textContent = formatDate(latestMeeting.date);
                document.getElementById('pdfMeetingTime').textContent = `${latestMeeting.startTime} - ${latestMeeting.endTime}`;
                document.getElementById('pdfMeetingVenue').textContent = latestMeeting.venue;
                document.getElementById('pdfMeetingType').textContent = latestMeeting.type === 'regular' ? 'Regular Meeting' : 'Random/Urgent Meeting';
                document.getElementById('pdfChairperson').textContent = latestMeeting.chair;
                document.getElementById('pdfMinutesTaker').textContent = latestMeeting.minutesTaker;
                document.getElementById('pdfDocId').textContent = latestMeeting.id;
                document.getElementById('pdfGeneratedDate').textContent = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('pdfPreparedBy').textContent = latestMeeting.minutesTaker;
                document.getElementById('pdfApprovedBy').textContent = latestMeeting.chair;
                
                // Load next meeting info if available
                if (latestMeeting.minutes?.nextMeeting) {
                    document.getElementById('pdfNextMeetingDate').textContent = formatDate(latestMeeting.minutes.nextMeeting.date);
                    document.getElementById('pdfNextMeetingTime').textContent = latestMeeting.minutes.nextMeeting.time;
                    document.getElementById('pdfNextMeetingVenue').textContent = latestMeeting.minutes.nextMeeting.venue;
                    document.getElementById('pdfNextMeetingAgenda').textContent = latestMeeting.minutes.nextMeeting.agenda;
                }
                
                // Load attendance
                const attendanceTable = document.getElementById('pdfAttendanceTable');
                if (attendanceTable && latestMeeting.attendees) {
                    attendanceTable.innerHTML = latestMeeting.attendees.map(attendee => `
                        <tr>
                            <td>${attendee.name}</td>
                            <td>${attendee.role}</td>
                            <td>${attendee.status}</td>
                            <td>${attendee.time}</td>
                        </tr>
                    `).join('');
                }
                
                // Load agenda
                const agendaContent = document.getElementById('pdfAgendaContent');
                if (agendaContent && latestMeeting.agenda) {
                    agendaContent.innerHTML = latestMeeting.agenda.map(item => `
                        <div style="margin-bottom: 10px;">
                            <strong>${item.id}. ${item.title}</strong><br>
                            <span style="font-size: 12px; color: #666;">
                                Presenter: ${item.presenter} | Duration: ${item.duration} mins | Status: ${item.status}
                            </span>
                        </div>
                    `).join('');
                }
                
                // Load decisions
                const decisionsContent = document.getElementById('pdfDecisionsContent');
                if (decisionsContent && latestMeeting.minutes?.decisions) {
                    decisionsContent.innerHTML = latestMeeting.minutes.decisions.map(decision => `
                        <div style="margin-bottom: 8px;">
                            ‚Ä¢ ${decision}
                        </div>
                    `).join('');
                }
                
                // Load action items
                const actionItemsTable = document.getElementById('pdfActionItemsTable');
                if (actionItemsTable && latestMeeting.minutes?.actionItems) {
                    actionItemsTable.innerHTML = latestMeeting.minutes.actionItems.map(item => `
                        <tr>
                            <td>${item.task}</td>
                            <td>${item.assignee}</td>
                            <td>${formatDate(item.deadline)}</td>
                            <td>${item.status}</td>
                        </tr>
                    `).join('');
                }
            }
        }

        function generatePDF() {
            showLoading('Generating PDF document...');
            
            setTimeout(() => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Set Times New Roman font
                doc.setFont("times");
                
                // Add SBC Header
                doc.setFontSize(20);
                doc.setTextColor(0, 102, 204); // SIT Blue
                doc.text("SIT STUDENT COUNCIL", 105, 20, null, null, "center");
                
                doc.setFontSize(16);
                doc.setTextColor(0, 153, 153); // SIT Teal
                doc.text("OFFICIAL MEETING MINUTES", 105, 30, null, null, "center");
                
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text(`Document ID: ${document.getElementById('pdfDocId').textContent}`, 20, 45);
                doc.text(`Generated: ${document.getElementById('pdfGeneratedDate').textContent}`, 20, 52);
                
                // Add horizontal line
                doc.setLineWidth(0.5);
                doc.line(20, 58, 190, 58);
                
                // Meeting Details Section
                doc.setFontSize(14);
                doc.setFont("times", "bold");
                doc.setTextColor(0, 102, 204);
                doc.text("MEETING DETAILS", 20, 70);
                
                doc.setFontSize(12);
                doc.setFont("times", "normal");
                doc.setTextColor(0, 0, 0);
                let yPos = 80;
                
                const details = [
                    ["Meeting Title:", document.getElementById('pdfMeetingTitle').textContent],
                    ["Date:", document.getElementById('pdfMeetingDate').textContent],
                    ["Time:", document.getElementById('pdfMeetingTime').textContent],
                    ["Venue:", document.getElementById('pdfMeetingVenue').textContent],
                    ["Meeting Type:", document.getElementById('pdfMeetingType').textContent],
                    ["Chairperson:", document.getElementById('pdfChairperson').textContent],
                    ["Minutes Taker:", document.getElementById('pdfMinutesTaker').textContent]
                ];
                
                details.forEach(([label, value]) => {
                    doc.text(label, 20, yPos);
                    doc.text(value, 60, yPos);
                    yPos += 7;
                });
                
                // Add page break if needed
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                }
                
                // Attendance Section
                doc.setFontSize(14);
                doc.setFont("times", "bold");
                doc.setTextColor(0, 102, 204);
                doc.text("ATTENDANCE", 20, yPos + 10);
                yPos += 20;
                
                // Create attendance table
                const attendanceHeaders = [["Name", "Role", "Status", "Time"]];
                const attendanceData = SBCDatabase.councilMembers.map(member => [
                    member.name,
                    member.role,
                    "Present",
                    "On Time"
                ]);
                
                doc.autoTable({
                    startY: yPos,
                    head: attendanceHeaders,
                    body: attendanceData,
                    theme: 'grid',
                    headStyles: { fillColor: [0, 102, 204], textColor: 255 },
                    margin: { left: 20, right: 20 }
                });
                
                yPos = doc.lastAutoTable.finalY + 15;
                
                // Add more sections similarly...
                
                // Save PDF
                doc.save(`SIT_Council_Minutes_${new Date().toISOString().split('T')[0]}.pdf`);
                
                showToast('PDF document generated successfully!', 'success');
                hideLoading();
            }, 2000);
        }

        // ==================== AUTO-SAVE FUNCTIONS ====================
        function startAutoSave() {
            if (autoSaveInterval) clearInterval(autoSaveInterval);
            
            autoSaveInterval = setInterval(() => {
                if (currentUser && autoSaveEnabled && unsavedChanges) {
                    saveAllDrafts();
                    updateAutoSaveIndicator('global', true);
                    console.log('Auto-saved at:', new Date().toLocaleTimeString());
                }
            }, 30000); // Every 30 seconds
        }

        function stopAutoSave() {
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
                autoSaveInterval = null;
            }
        }

        function saveAllDrafts() {
            // Save meeting draft
            if (currentPage === 'new-meeting') {
                saveMeetingDraft();
            }
            
            // Save other drafts based on current page
            // ...
            
            unsavedChanges = false;
        }

        function updateAutoSaveIndicator(indicatorId, saved = false) {
            const indicator = document.getElementById(`${indicatorId}AutoSave`) || 
                             document.getElementById('globalAutoSaveIndicator');
            
            if (indicator) {
                if (saved) {
                    indicator.classList.add('saved');
                    indicator.querySelector('span').textContent = 'Saved';
                    
                    setTimeout(() => {
                        indicator.classList.remove('saved');
                        indicator.querySelector('span').textContent = 'Auto-save';
                    }, 2000);
                } else {
                    indicator.classList.add('saving');
                    indicator.querySelector('span').textContent = 'Saving...';
                    
                    setTimeout(() => {
                        indicator.classList.remove('saving');
                        indicator.querySelector('span').textContent = 'Auto-save';
                    }, 1000);
                }
            }
        }

        function setupFormAutoSave() {
            const forms = document.querySelectorAll('input, textarea, select');
            forms.forEach(form => {
                form.addEventListener('input', () => {
                    markUnsavedChanges();
                    const page = currentPage;
                    updateAutoSaveIndicator(page);
                });
            });
        }

        function markUnsavedChanges() {
            unsavedChanges = true;
        }

        // ==================== UTILITY FUNCTIONS ====================
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function formatTimeAgo(dateTimeString) {
            const date = new Date(dateTimeString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            return date.toLocaleDateString();
        }

        function getReactionEmoji(reaction) {
            const emojis = {
                like: 'üëç',
                heart: '‚ù§Ô∏è',
                celebrate: 'üéâ',
                thumbsup: 'üëç',
                fire: 'üî•',
                smile: 'üòä'
            };
            return emojis[reaction] || 'üëç';
        }

        function updateSystemInfo() {
            document.getElementById('activeUsersCount').textContent = SBCDatabase.councilMembers.length;
        }

        function updateLoginStats() {
            // In a real app, update login statistics
            console.log('Login recorded for:', currentUser?.name);
        }

        function loadDrafts() {
            // Load saved drafts from localStorage
            const savedDrafts = localStorage.getItem('sbc_drafts');
            if (savedDrafts) {
                try {
                    const drafts = JSON.parse(savedDrafts);
                    Object.assign(SBCDatabase.drafts, drafts);
                } catch (e) {
                    console.error('Error loading drafts:', e);
                }
            }
        }

        function saveUserData() {
            // Save user data to localStorage
            localStorage.setItem('sbc_database', JSON.stringify(SBCDatabase));
        }

        function initializeCharts() {
            // Initialize any charts needed
        }

        function handleResize() {
            // Handle responsive behavior
            if (window.innerWidth > 1024) {
                sidebar.classList.remove('active');
            }
        }

        function showUserMenu() {
            const menu = document.createElement('div');
            menu.style.position = 'absolute';
            menu.style.top = 'calc(38px + var(--header-height) + 10px)';
            menu.style.right = '30px';
            menu.style.background = 'var(--bg-card)';
            menu.style.borderRadius = 'var(--radius)';
            menu.style.boxShadow = 'var(--shadow-lg)';
            menu.style.padding = '10px 0';
            menu.style.minWidth = '200px';
            menu.style.zIndex = '1001';
            menu.style.border = '2px solid var(--accent)';
            
            menu.innerHTML = `
                <div style="padding: 15px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 700; color: var(--text-primary);">${currentUser?.name}</div>
                    <div style="font-size: 12px; color: var(--text-tertiary);">${currentUser?.role}</div>
                </div>
                <button class="user-menu-item" onclick="navigateTo('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button class="user-menu-item" onclick="showProfile()">
                    <i class="fas fa-user"></i> Profile
                </button>
                <button class="user-menu-item" onclick="logout()" style="color: var(--danger);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            `;
            
            // Add styles for menu items
            const style = document.createElement('style');
            style.textContent = `
                .user-menu-item {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    width: 100%;
                    padding: 12px 20px;
                    border: none;
                    background: none;
                    color: var(--text-primary);
                    cursor: pointer;
                    border-radius: 6px;
                    transition: var(--transition);
                    font-size: 14px;
                    font-weight: 500;
                }
                .user-menu-item:hover {
                    background: var(--bg-tertiary);
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(menu);
            
            // Close menu when clicking outside
            setTimeout(() => {
                const closeMenu = (e) => {
                    if (!menu.contains(e.target) && !userProfile.contains(e.target)) {
                        menu.remove();
                        document.removeEventListener('click', closeMenu);
                        style.remove();
                    }
                };
                document.addEventListener('click', closeMenu);
            }, 100);
        }

        function showProfile() {
            alert(`Profile Information:\n\nName: ${currentUser?.name}\nEmail: ${currentUser?.email}\nRole: ${currentUser?.role}\nStudent ID: ${currentUser?.studentId}\nDepartment: ${currentUser?.department}`);
        }

        function exportAllData() {
            const data = {
                user: currentUser,
                database: SBCDatabase,
                exportedAt: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `sbc_data_export_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast('All data exported successfully', 'success');
        }

        function clearCache() {
            if (confirm('Clear all cached data? This will remove drafts and temporary files.')) {
                localStorage.removeItem('sbc_meeting_draft');
                localStorage.removeItem('sbc_drafts');
                SBCDatabase.drafts = { meeting: null, agenda: [], questions: [], minutes: null };
                showToast('Cache cleared successfully', 'success');
            }
        }

        function createBackup() {
            showLoading('Creating backup...');
            
            setTimeout(() => {
                const backup = {
                    database: SBCDatabase,
                    timestamp: new Date().toISOString(),
                    version: SBCDatabase.system.version
                };
                
                localStorage.setItem('sbc_backup', JSON.stringify(backup));
                SBCDatabase.system.lastBackup = new Date().toISOString();
                
                showToast('Backup created successfully', 'success');
                hideLoading();
            }, 1000);
        }

        function updateMeetingTypeVisual() {
            document.querySelectorAll('.meeting-type-selector > div').forEach(div => {
                div.style.background = 'var(--bg-tertiary)';
                div.style.borderColor = 'var(--border)';
            });
            
            const selected = document.querySelector('input[name="meetingType"]:checked');
            if (selected) {
                const label = document.querySelector(`label[for="${selected.id}"] > div`);
                if (label) {
                    label.style.background = 'var(--primary-light)';
                    label.style.borderColor = selected.value === 'regular' ? 'var(--info)' : 'var(--warning)';
                }
            }
        }

        // ==================== WINDOW EVENT LISTENERS ====================
        window.addEventListener('beforeunload', (e) => {
            if (unsavedChanges) {
                e.preventDefault();
                e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                return e.returnValue;
            }
        });

        // ==================== INITIAL DATA LOADING ====================
        // Load initial data for pages that need it
        setTimeout(() => {
            if (currentUser) {
                loadDashboard();
                updateSystemInfo();
            }
        }, 1000);

        // ==================== EXPORT FUNCTIONS FOR HTML ATTRIBUTES ====================
        // These functions are called from HTML onclick attributes
        window.navigateTo = navigateTo;
        window.addReaction = addReaction;
        window.showReactionMenu = function(messageId) {
            // Implementation for reaction menu
            console.log('Show reaction menu for message:', messageId);
        };
        window.replyToMessage = function(messageId) {
            const reply = prompt('Enter your reply:');
            if (reply) {
                const message = SBCDatabase.chatMessages.find(m => m.id === messageId);
                if (message) {
                    if (!message.replies) message.replies = [];
                    message.replies.push({
                        senderId: currentUser.id,
                        senderName: currentUser.name,
                        message: reply,
                        timestamp: new Date().toISOString()
                    });
                    loadChatMessages();
                    markUnsavedChanges();
                }
            }
        };
        window.likeUpdate = function(updateId) {
            const update = SBCDatabase.updates.find(u => u.id === updateId);
            if (update) {
                update.likes = (update.likes || 0) + 1;
                loadCouncilUpdates();
                showToast('Update liked', 'success');
            }
        };
        window.commentOnUpdate = function(updateId) {
            const comment = prompt('Enter your comment:');
            if (comment) {
                const update = SBCDatabase.updates.find(u => u.id === updateId);
                if (update) {
                    update.comments = (update.comments || 0) + 1;
                    loadCouncilUpdates();
                    showToast('Comment added', 'success');
                }
            }
        };
        window.shareUpdate = function(updateId) {
            const update = SBCDatabase.updates.find(u => u.id === updateId);
            if (update) {
                const shareText = `${update.title}\n\n${update.content}\n\nShared from SIT Council Portal`;
                if (navigator.share) {
                    navigator.share({
                        title: update.title,
                        text: shareText,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(shareText);
                    showToast('Update copied to clipboard', 'success');
                }
            }
        };
        window.editUpdate = function(updateId) {
            if (!currentUser?.isController) {
                showToast('Only controllers can edit updates', 'error');
                return;
            }
            const update = SBCDatabase.updates.find(u => u.id === updateId);
            if (update) {
                const newTitle = prompt('Edit title:', update.title);
                if (newTitle !== null) update.title = newTitle;
                const newContent = prompt('Edit content:', update.content);
                if (newContent !== null) update.content = newContent;
                loadCouncilUpdates();
                showToast('Update edited', 'success');
            }
        };
        window.deleteUpdate = function(updateId) {
            if (!currentUser?.isController) {
                showToast('Only controllers can delete updates', 'error');
                return;
            }
            if (confirm('Are you sure you want to delete this update?')) {
                SBCDatabase.updates = SBCDatabase.updates.filter(u => u.id !== updateId);
                loadCouncilUpdates();
                showToast('Update deleted', 'success');
            }
        };
        window.messageMember = function(memberId) {
            const member = SBCDatabase.councilMembers.find(m => m.id === memberId);
            if (member) {
                navigateTo('chat');
                setTimeout(() => {
                    const input = document.getElementById('messageInput');
                    input.value = `Hi ${member.name.split(' ')[0]}, `;
                    input.focus();
                    showToast(`Now chatting with ${member.name}`, 'info');
                }, 100);
            }
        };
        window.editMember = function(memberId) {
            if (!currentUser?.isController) {
                showToast('Only controllers can edit members', 'error');
                return;
            }
            const member = SBCDatabase.councilMembers.find(m => m.id === memberId);
            if (member) {
                const newName = prompt('Edit name:', member.name);
                if (newName !== null) member.name = newName;
                const newRole = prompt('Edit role:', member.role);
                if (newRole !== null) member.role = newRole;
                loadMembers();
                showToast('Member updated', 'success');
            }
        };
        window.viewArchivedMeeting = function(meetingId) {
            const meeting = SBCDatabase.meetings.find(m => m.id === meetingId);
            if (meeting) {
                alert(`Meeting Details:\n\nTitle: ${meeting.title}\nDate: ${formatDate(meeting.date)}\nType: ${meeting.type}\nVenue: ${meeting.venue}\n\n${meeting.objective || ''}`);
            }
        };
        window.restoreMeeting = function(meetingId) {
            if (confirm('Restore this meeting from archive?')) {
                const meeting = SBCDatabase.meetings.find(m => m.id === meetingId);
                if (meeting) {
                    meeting.archived = false;
                    loadArchive();
                    showToast('Meeting restored', 'success');
                }
            }
        };
        window.downloadMeetingPDF = function(meetingId) {
            const meeting = SBCDatabase.meetings.find(m => m.id === meetingId);
            if (meeting) {
                // Generate PDF for specific meeting
                generatePDF();
            }
        };
        // In frontend JavaScript, update API calls:
const API_BASE_URL = 'http://localhost:5000/api';

// Example login
async function login(email, password, studentId) {
  const response = await fetch(`${API_BASE_URL}/auth/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password, studentId })
  });
  return response.json();
}

// Example with authentication
async function getMeetings() {
  const token = localStorage.getItem('token');
  const response = await fetch(`${API_BASE_URL}/meetings`, {
    headers: { 
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    }
  });
  return response.json();
}
    </script>
    
    <!-- Vercel Speed Insights -->
    <script>
      window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>
